"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{49294:function(e,s,a){a.d(s,{E:function(){return o}});var t=a(57437),r=a(2265),l=a(74780),i=a(57223),n=a(25922);let c=(0,r.createContext)(void 0),o=()=>{let e=(0,r.useContext)(c);if(!e)throw Error("useAuthContext debe usarse dentro de AuthProvider");return e};function d(e){let{children:s}=e,[a,i]=(0,r.useState)(null),[n,o]=(0,r.useState)(!0),[d,m]=(0,r.useState)(null),u=(0,r.useCallback)(async()=>{try{let e=localStorage.getItem("access_token");if(!e){i(null),o(!1);return}let s=await fetch("".concat((0,l.X)(),"/api/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();i(e.user),m(null)}else localStorage.removeItem("access_token"),i(null)}catch(e){m("Error verificando autenticaci\xf3n"),i(null)}finally{o(!1)}},[]);(0,r.useEffect)(()=>{u()},[u]);let x=(0,r.useCallback)(async(e,s)=>{localStorage.setItem("access_token",e),i(s),m(null),o(!1)},[]),h=(0,r.useCallback)(async()=>{try{let e=localStorage.getItem("access_token");e&&await fetch("".concat((0,l.X)(),"/api/auth/logout"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})}catch(e){}finally{localStorage.removeItem("access_token"),i(null)}},[]),p=(0,r.useCallback)(async()=>{try{let e=localStorage.getItem("access_token");if(!e)return;let s=await fetch("".concat((0,l.X)(),"/api/auth/refresh"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();localStorage.setItem("access_token",e.access_token),await u()}else localStorage.removeItem("access_token"),i(null)}catch(e){}},[u]),g={user:a,loading:n,error:d,role:(null==a?void 0:a.role)||"student",login:x,logout:h,refreshToken:p,checkAuth:u,isAuthenticated:!!a,subscriptionTier:(null==a?void 0:a.subscription_tier)||"free"};return(0,t.jsx)(c.Provider,{value:g,children:s})}s.default=function(e){let{children:s}=e;return(0,t.jsx)(i.w,{children:(0,t.jsx)(n.f,{attribute:"class",defaultTheme:"light",themes:["light","dark","julia-light","julia-dark"],children:(0,t.jsx)(d,{children:s})})})}},31545:function(e,s,a){a.d(s,{Z:function(){return sa}});var t=a(57437),r=a(2265),l=a(76362),i=a(93649),n=a(99008),c=a(15035),o=a(18120),d=a(53168),m=a(67640),u=a(38480),x=a(35492),h=a(49365),p=a(82431),g=a(75395),j=a(62926),b=a(49322),y=a(96215),f=a(70525),N=a(76399),v=a(86595),w=a(71769),D=a(64972),_=a(58896),S=a(31047),z=a(88997),C=a(42488),k=a(49474),E=a(33327),A=a(95805),T=a(66949),Z=a(53417),P=a(90573),G=a(65455),I=a(35827),R=a(84555),M=a(13706),q=a(48736),O=a(55900),F=a(82222),L=a(98728),B=a(82023),V=a(92369),J=a(44743),U=a(93439),K=a(60525),H=a(81315),Q=a(46191);a(2446);let Y=[{id:"exam_generator",name:"Generador de Ex\xe1menes",icon:q.Z,color:"primary",description:"Genera ex\xe1menes personalizados y evaluaciones"},{id:"curriculum_creator",name:"Creador de Curr\xedculum",icon:w.Z,color:"secondary",description:"Dise\xf1a planes de estudio estructurados"},{id:"tutor",name:"Tutor Virtual",icon:O.Z,color:"success",description:"Proporciona tutor\xeda personalizada"},{id:"lesson_planner",name:"Planificador de Lecciones",icon:S.Z,color:"warning",description:"Crea planes de lecci\xf3n detallados"},{id:"performance_analyzer",name:"Analizador de Rendimiento",icon:y.Z,color:"danger",description:"Analiza y mejora el rendimiento acad\xe9mico"}];function W(e){let{onActivityUpdate:s}=e,{user:a}=(0,l.a)(),m=null==a?void 0:a.id,[u,x]=(0,r.useState)([{id:"1",type:"system",content:"\xa1Bienvenido al Chat de Agentes Educativos! Selecciona uno o m\xe1s agentes y comienza a chatear.",timestamp:new Date}]),[p,g]=(0,r.useState)(""),[j,b]=(0,r.useState)(["tutor"]),[y,f]=(0,r.useState)("individual"),[N,v]=(0,r.useState)(!1),[w,D]=(0,r.useState)([]),_=(0,r.useRef)(null),S=(0,r.useRef)(null),z=()=>{var e;null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{z()},[u]),(0,r.useEffect)(()=>{C()},[]);let C=async()=>{try{let e=await fetch("/api/agents/status"),s=await e.json();D(s.agents||[])}catch(e){console.error("Error fetching agents status:",e)}},k=async()=>{if(!p.trim()||0===j.length)return;let e={id:Date.now().toString(),type:"user",content:p,timestamp:new Date};x(s=>[...s,e]),g(""),v(!0);try{let e=await fetch("/api/agents/unified-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:p,selected_agents:j,chat_mode:y,context:{student_id:m,timestamp:new Date().toISOString()}})}),a=await e.json();if("collaboration"===y){let e="string"==typeof a.collaboration_result?a.collaboration_result:JSON.stringify(a.collaboration_result,null,2),s={id:Date.now().toString()+"_collab",type:"agent",content:e,timestamp:new Date,agentType:"collaboration",agentName:"Colaboraci\xf3n Multi-Agente"};x(e=>[...e,s])}else{let e=a.responses.map((e,s)=>{let a=e.formatted_content||e.response;return"string"!=typeof a&&(a=JSON.stringify(a,null,2)),!a||a.includes("#")||a.includes("**")||a.includes("*")||!(a.length>50)||(a="## \uD83D\uDCDA ".concat(e.agent_name,"\n\n").concat(a)),console.log("\uD83D\uDD0D AgentChat - ".concat(e.agent_name,":"),{hasFormattedContent:!!e.formatted_content,hasResponse:!!e.response,contentPreview:a.substring(0,100)+"...",isMarkdown:a.includes("#")||a.includes("**")}),{id:Date.now().toString()+"_"+s,type:"agent",content:a,timestamp:new Date,agentType:e.agent_type,agentName:e.agent_name,isRealAgent:e.is_real_agent}});x(s=>[...s,...e])}s&&s({type:"chat_session",duration_minutes:5,points_earned:10})}catch(s){console.error("Error sending message:",s);let e={id:Date.now().toString()+"_error",type:"system",content:"Error al comunicarse con los agentes. Por favor, intenta de nuevo.",timestamp:new Date};x(s=>[...s,e])}finally{v(!1)}},E=e=>{b(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},T=e=>{let s=Y.find(s=>s.id===e);return(null==s?void 0:s.icon)||F.Z},q=e=>{let s=Y.find(s=>s.id===e);return(null==s?void 0:s.color)||"default"};return(0,t.jsxs)("div",{className:"h-screen flex flex-col max-w-7xl mx-auto p-4",children:[(0,t.jsx)(i.w,{className:"mb-4",children:(0,t.jsxs)(h.u,{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:(0,t.jsx)(Z.Z,{className:"text-white",size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Chat de Agentes Educativos"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Interact\xfaa con m\xfaltiples agentes especializados"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(d.z,{color:"success",variant:"flat",children:[w.filter(e=>e.is_real_agent).length," Agentes Reales"]}),(0,t.jsx)(P.i,{isSelected:"collaboration"===y,onValueChange:e=>f(e?"collaboration":"individual"),color:"secondary",children:"Modo Colaboraci\xf3n"})]})]})}),(0,t.jsxs)("div",{className:"flex-1 flex gap-4",children:[(0,t.jsxs)(i.w,{className:"w-80 flex-shrink-0",children:[(0,t.jsx)(h.u,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Agentes Disponibles"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.A,{size:"sm",variant:"flat",onPress:()=>{b(Y.map(e=>e.id))},children:"Todos"}),(0,t.jsx)(c.A,{size:"sm",variant:"flat",onPress:()=>{b([])},children:"Limpiar"})]})]})}),(0,t.jsxs)(n.G,{className:"space-y-3",children:[Y.map(e=>{let s=e.icon,a=j.includes(e.id),r=w.find(s=>s.type===e.id);return(0,t.jsx)("div",{className:"p-3 rounded-lg border-2 cursor-pointer transition-all ".concat(a?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),onClick:()=>E(e.id),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-".concat(e.color,"-100 dark:bg-").concat(e.color,"-900/20"),children:(0,t.jsx)(s,{className:"text-".concat(e.color,"-600"),size:20})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h4",{className:"font-semibold text-sm",children:e.name}),(null==r?void 0:r.is_real_agent)&&(0,t.jsx)(d.z,{size:"sm",color:"success",variant:"flat",children:"Real"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.description})]})]})},e.id)}),(0,t.jsx)(G.j,{className:"my-4"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[j.length," agente(s) seleccionado(s)"]}),"collaboration"===y&&(0,t.jsxs)(d.z,{color:"secondary",variant:"flat",className:"mt-2",children:[(0,t.jsx)(A.Z,{size:14,className:"mr-1"}),"Modo Colaboraci\xf3n Activo"]})]})]})]}),(0,t.jsxs)(i.w,{className:"flex-1 flex flex-col",children:[(0,t.jsx)(h.u,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Conversaci\xf3n"}),(0,t.jsx)(c.A,{variant:"flat",size:"sm",onPress:()=>x([{id:Date.now().toString(),type:"system",content:"Chat reiniciado. \xa1Comienza una nueva conversaci\xf3n!",timestamp:new Date}]),children:"Limpiar Chat"})]})}),(0,t.jsxs)(n.G,{className:"flex-1 flex flex-col p-0",children:[(0,t.jsxs)(I.o,{className:"flex-1 p-4 space-y-4",children:[u.map(e=>(0,t.jsxs)("div",{className:"flex gap-3 ".concat("user"===e.type?"justify-end":"justify-start"),children:["user"!==e.type&&(0,t.jsx)(o.h,{icon:"system"===e.type?(0,t.jsx)(L.Z,{size:18}):r.createElement(T(e.agentType),{size:18}),className:"flex-shrink-0 ".concat("system"===e.type?"bg-gray-100 dark:bg-gray-800":"bg-".concat(q(e.agentType),"-100 dark:bg-").concat(q(e.agentType),"-900/20"))}),(0,t.jsxs)("div",{className:"max-w-[80%] ".concat("user"===e.type?"order-first":""),children:[(0,t.jsxs)("div",{className:"p-3 rounded-lg ".concat("user"===e.type?"bg-blue-500 text-white ml-auto":"system"===e.type?"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700"),children:["user"!==e.type&&"system"!==e.type&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-gray-200 dark:border-gray-600",children:[(0,t.jsx)("span",{className:"font-semibold text-sm",children:e.agentName}),e.isRealAgent&&(0,t.jsxs)(d.z,{size:"sm",color:"success",variant:"flat",children:[(0,t.jsx)(B.Z,{size:12,className:"mr-1"}),"Real"]})]}),(0,t.jsx)("div",{className:"text-sm",children:"user"===e.type?(0,t.jsx)("div",{className:"whitespace-pre-wrap",children:"string"==typeof e.content?e.content:JSON.stringify(e.content,null,2)}):(0,t.jsx)("div",{className:"markdown-content",children:(0,t.jsx)(U.UG,{remarkPlugins:[K.Z,H.Z],rehypePlugins:[Q.Z],components:{h1:e=>{let{children:s}=e;return(0,t.jsx)("h1",{className:"text-lg font-bold mb-3 text-blue-700 border-b border-blue-200 pb-1",children:s})},h2:e=>{let{children:s}=e;return(0,t.jsx)("h2",{className:"text-base font-bold mb-2 text-blue-600",children:s})},h3:e=>{let{children:s}=e;return(0,t.jsx)("h3",{className:"text-sm font-semibold mb-2 text-blue-500",children:s})},h4:e=>{let{children:s}=e;return(0,t.jsx)("h4",{className:"text-xs font-semibold mb-1 text-blue-400",children:s})},p:e=>{let{children:s}=e;return(0,t.jsx)("p",{className:"mb-2 leading-relaxed",children:s})},blockquote:e=>{let{children:s}=e;return(0,t.jsx)("blockquote",{className:"border-l-4 border-blue-300 bg-blue-50 dark:bg-blue-900/20 pl-3 py-2 mb-2 italic rounded-r-lg",children:s})},code:e=>{let{className:s,children:a,...r}=e,l=/language-(\w+)/.exec(s||""),i=l?l[1]:"";return"inline"in e&&e.inline?(0,t.jsx)("code",{className:"bg-gray-200 dark:bg-gray-700 text-red-600 dark:text-red-400 px-1 py-0.5 rounded text-xs font-mono",children:a}):(0,t.jsxs)("div",{className:"mb-2",children:[i&&(0,t.jsx)("div",{className:"bg-gray-700 text-white px-2 py-1 text-xs rounded-t",children:i}),(0,t.jsx)("pre",{className:"bg-gray-100 dark:bg-gray-800 p-2 overflow-x-auto font-mono text-xs ".concat(i?"rounded-b":"rounded"),children:(0,t.jsx)("code",{...r,children:a})})]})},ul:e=>{let{children:s}=e;return(0,t.jsx)("ul",{className:"list-disc list-inside mb-2 space-y-0.5 ml-2",children:s})},ol:e=>{let{children:s}=e;return(0,t.jsx)("ol",{className:"list-decimal list-inside mb-2 space-y-0.5 ml-2",children:s})},li:e=>{let{children:s}=e;return(0,t.jsx)("li",{className:"mb-0.5 text-sm",children:s})},table:e=>{let{children:s}=e;return(0,t.jsx)("div",{className:"overflow-x-auto mb-3",children:(0,t.jsx)("table",{className:"min-w-full border-collapse border border-gray-300 dark:border-gray-600 rounded text-xs",children:s})})},thead:e=>{let{children:s}=e;return(0,t.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s})},th:e=>{let{children:s}=e;return(0,t.jsx)("th",{className:"border border-gray-300 dark:border-gray-600 px-2 py-1 text-left font-semibold text-xs",children:s})},td:e=>{let{children:s}=e;return(0,t.jsx)("td",{className:"border border-gray-300 dark:border-gray-600 px-2 py-1 text-xs",children:s})},a:e=>{let{href:s,children:a}=e;return(0,t.jsx)("a",{href:s,className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline transition-colors",target:"_blank",rel:"noopener noreferrer",children:a})},strong:e=>{let{children:s}=e;return(0,t.jsx)("strong",{className:"font-bold",children:s})},em:e=>{let{children:s}=e;return(0,t.jsx)("em",{className:"italic",children:s})},hr:()=>(0,t.jsx)("hr",{className:"my-2 border-t border-gray-200 dark:border-gray-600"})},children:"string"==typeof e.content?e.content:JSON.stringify(e.content,null,2)})})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1 px-2",children:e.timestamp.toLocaleTimeString()})]}),"user"===e.type&&(0,t.jsx)(o.h,{icon:(0,t.jsx)(V.Z,{size:18}),className:"flex-shrink-0 bg-blue-100 dark:bg-blue-900/20"})]},e.id)),N&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.h,{icon:(0,t.jsx)(F.Z,{size:18}),className:"flex-shrink-0 bg-gray-100 dark:bg-gray-800"}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-3 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(R.c,{size:"sm"}),(0,t.jsx)("span",{className:"text-sm",children:"collaboration"===y?"Agentes colaborando...":"Agentes procesando..."})]})})]}),(0,t.jsx)("div",{ref:_})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(M.Y,{ref:S,value:p,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())},placeholder:"Escribe tu mensaje aqu\xed... (Enter para enviar, Shift+Enter para nueva l\xednea)",minRows:1,maxRows:4,className:"flex-1",disabled:N||0===j.length}),(0,t.jsx)(c.A,{color:"primary",onPress:k,isDisabled:!p.trim()||0===j.length||N,isLoading:N,className:"self-end",children:(0,t.jsx)(J.Z,{size:18})})]}),0===j.length&&(0,t.jsx)("p",{className:"text-sm text-red-500 mt-2",children:"Selecciona al menos un agente para comenzar a chatear"})]})]})]})]})]})}var $=a(11239);let X=[{id:"exam_generator",name:"Generador de Ex\xe1menes",icon:q.Z,color:"primary",description:"Genera ex\xe1menes personalizados y evaluaciones"},{id:"curriculum_creator",name:"Creador de Curr\xedculum",icon:w.Z,color:"secondary",description:"Dise\xf1a planes de estudio estructurados"},{id:"tutor",name:"Tutor Virtual",icon:O.Z,color:"success",description:"Proporciona tutor\xeda personalizada"},{id:"lesson_planner",name:"Planificador de Lecciones",icon:S.Z,color:"warning",description:"Crea planes de lecci\xf3n detallados"},{id:"performance_analyzer",name:"Analizador de Rendimiento",icon:y.Z,color:"danger",description:"Analiza y mejora el rendimiento acad\xe9mico"}];function ee(e){let{onActivityUpdate:s}=e,{user:a}=(0,l.a)(),m=null==a?void 0:a.id,u=e=>"string"!=typeof e?e:e.replace(/\x1b\[[0-9;]*m/g,"").replace(/\[([0-9]+)m/g,"").replace(/┃/g,"").replace(/┗━+┛/g,"").replace(/┏━+┓/g,"").replace(/\s+\n/g,"\n").replace(/\n{3,}/g,"\n\n").trim(),[p,g]=(0,r.useState)([{id:"1",type:"system",content:"## \uD83D\uDE80 \xa1Bienvenido al Sistema Multiagente Completo!\n\n### \uD83D\uDC65 **Equipo de Especialistas Listos**\n\nTodos los **agentes educativos** est\xe1n conectados y preparados para colaborar en tu aprendizaje:\n\n- \uD83D\uDCDD **Generador de Ex\xe1menes** - Evaluaciones personalizadas\n- \uD83D\uDCDA **Creador de Curr\xedculum** - Planes de estudio estructurados  \n- \uD83C\uDF93 **Tutor Virtual** - Tutor\xeda especializada\n- \uD83D\uDCC5 **Planificador de Lecciones** - Organizaci\xf3n de contenido\n- \uD83D\uDCCA **Analizador de Rendimiento** - M\xe9tricas y mejoras\n\n> **\uD83D\uDCA1 Cada consulta ser\xe1 respondida por todo el equipo**, brind\xe1ndote m\xfaltiples perspectivas especializadas.\n\n### \uD83C\uDFAF **\xbfC\xf3mo funciona?**\n\n1. **Escribe tu pregunta** sobre cualquier tema acad\xe9mico\n2. **Todos los agentes analizan** tu consulta desde su especialidad\n3. **Recibes respuestas coordinadas** con diferentes enfoques\n4. **Obtienes una visi\xf3n 360\xb0** del tema consultado\n\n\xa1Comienza preguntando algo! \uD83C\uDF93✨",timestamp:new Date}]),[j,b]=(0,r.useState)(""),[y,f]=(0,r.useState)(!1),[N,v]=(0,r.useState)("individual"),[w,_]=(0,r.useState)([]),[S,z]=(0,r.useState)(X.map(e=>e.id)),C=(0,r.useRef)(null),k=(0,r.useRef)(null),E=()=>{var e;null===(e=C.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{E()},[p]),(0,r.useEffect)(()=>{T()},[]);let T=async()=>{try{let e=await fetch("/api/agents/status"),s=await e.json();_(s.agents||[])}catch(e){console.error("Error fetching agents status:",e)}},Z=async()=>{if(!j.trim())return;let e={id:Date.now().toString(),type:"user",content:j,timestamp:new Date};g(s=>[...s,e]),b(""),f(!0);try{let e=await fetch("/api/agents/unified-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:j,selected_agents:S,chat_mode:N,context:{student_id:m,timestamp:new Date().toISOString(),multiagent_mode:!0}})}),a=await e.json();if("collaboration"===N){let e="string"==typeof a.collaboration_result?a.collaboration_result:JSON.stringify(a.collaboration_result,null,2);e=u(e);let s={id:Date.now().toString()+"_collab",type:"agent",content:e,timestamp:new Date,agentType:"collaboration",agentName:"\uD83E\uDD1D Respuesta Colaborativa de Todos los Agentes"};g(e=>[...e,s])}else{let e=a.responses.map((e,s)=>{let a=e.formatted_content||e.response;return"string"!=typeof a&&(a=JSON.stringify(a,null,2)),(a=u(a))&&!a.includes("#")&&!a.includes("**")&&!a.includes("*")&&a.length>50&&a.split("\n").filter(e=>e.trim()).length>2&&(a="## \uD83D\uDCDA ".concat(e.agent_name,"\n\n").concat(a)),console.log("\uD83D\uDD0D Agente ".concat(e.agent_name,":"),{hasFormattedContent:!!e.formatted_content,hasResponse:!!e.response,contentPreview:a.substring(0,200)+"...",isMarkdown:a.includes("#")||a.includes("**"),cleanedContent:a.length}),{id:Date.now().toString()+"_"+s,type:"agent",content:a,timestamp:new Date,agentType:e.agent_type,agentName:e.agent_name,isRealAgent:e.is_real_agent}});g(s=>[...s,...e])}s&&s({type:"chat_session",duration_minutes:8,points_earned:15})}catch(s){console.error("Error sending message:",s);let e={id:Date.now().toString()+"_error",type:"system",content:"## ❌ Error de Comunicaci\xf3n\n\n### \uD83D\uDD27 **Problema Detectado**\n\nHa ocurrido un **error temporal** en la comunicaci\xf3n con los agentes:\n\n- \uD83D\uDEA8 **Estado**: Conexi\xf3n interrumpida\n- \uD83D\uDD04 **Acci\xf3n**: Sistema trabajando en reconexi\xf3n autom\xe1tica\n- ⏱️ **Tiempo estimado**: Reconectando en unos segundos\n\n> **\uD83D\uDCA1 Tip**: Puedes intentar enviar tu mensaje nuevamente en un momento.\n\n### \uD83D\uDEE0️ **\xbfQu\xe9 est\xe1 pasando?**\n\nEl sistema est\xe1 **reestableciendo las conexiones** con todos los agentes especializados para garantizar que recibas respuestas de calidad.\n\n**El equipo t\xe9cnico ha sido notificado autom\xe1ticamente.** \uD83D\uDD14",timestamp:new Date};g(s=>[...s,e])}finally{f(!1)}},G=e=>{let s=X.find(s=>s.id===e);return(null==s?void 0:s.icon)||F.Z},q=e=>{let s=X.find(s=>s.id===e);return(null==s?void 0:s.color)||"default"},O=w.filter(e=>e.is_real_agent).length,Y=X.length;return(0,t.jsxs)("div",{className:"h-screen flex flex-col max-w-7xl mx-auto",children:[(0,t.jsx)(i.w,{className:"mb-4",children:(0,t.jsxs)(h.u,{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-gradient-to-r from-green-500 to-blue-600 rounded-lg",children:(0,t.jsx)(A.Z,{className:"text-white",size:28})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Sistema Multiagente Completo"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Todos los especialistas trabajando en equipo para ti"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)(d.z,{color:"success",variant:"flat",size:"lg",children:[(0,t.jsx)($.Z,{size:16,className:"mr-1"}),O,"/",Y," Agentes Activos"]}),(0,t.jsx)(x.W,{value:O/Y*100,color:"success",size:"sm",className:"mt-1 w-24"})]}),(0,t.jsx)(P.i,{isSelected:"collaboration"===N,onValueChange:e=>v(e?"collaboration":"individual"),color:"secondary",size:"lg",children:"Modo Colaboraci\xf3n"})]})]})}),(0,t.jsx)(i.w,{className:"mb-4",children:(0,t.jsxs)(n.G,{className:"py-3",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:X.map(e=>{let s=e.icon,a=w.find(s=>s.type===e.id),r=S.includes(e.id);return(0,t.jsx)(d.z,{variant:r?"solid":"bordered",color:r?e.color:"default",size:"md",startContent:(0,t.jsx)(s,{size:14}),endContent:(null==a?void 0:a.is_real_agent)?(0,t.jsx)(B.Z,{size:12}):(0,t.jsx)(F.Z,{size:12}),className:"transition-all hover:scale-105",children:e.name},e.id)})}),(0,t.jsx)("div",{className:"text-center mt-3",children:(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"collaboration"===N?"\uD83E\uDD1D Los agentes colaborar\xe1n en una respuesta unificada":"\uD83C\uDFAF Cada agente proporcionar\xe1 su perspectiva especializada"})})]})}),(0,t.jsxs)(i.w,{className:"flex-1 flex flex-col",children:[(0,t.jsx)(h.u,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Conversaci\xf3n Multiagente"}),(0,t.jsx)(c.A,{variant:"flat",size:"sm",onPress:()=>g([{id:Date.now().toString(),type:"system",content:"## \uD83D\uDD04 Chat Reiniciado\n\n### ✨ **Sistema Completamente Renovado**\n\nEl **equipo completo de agentes** ha sido reinicializado y est\xe1 listo para una nueva consulta:\n\n- \uD83D\uDD0B **Memoria limpia** - Sin contexto previo\n- \uD83C\uDFAF **Especialistas activos** - Todos los agentes preparados  \n- \uD83D\uDE80 **Rendimiento \xf3ptimo** - Sistema funcionando al 100%\n\n> **\xa1Perfecto momento para comenzar una nueva conversaci\xf3n!** \n\n### \uD83D\uDCAB **\xbfQu\xe9 te gustar\xeda explorar ahora?**\n\nPuedes preguntar sobre cualquier tema acad\xe9mico y **todos los especialistas** trabajar\xe1n juntos para darte la mejor respuesta posible.",timestamp:new Date}]),children:"Reiniciar Chat"})]})}),(0,t.jsxs)(n.G,{className:"flex-1 flex flex-col p-0",children:[(0,t.jsxs)(I.o,{className:"flex-1 p-4 space-y-4",children:[p.map(e=>(0,t.jsxs)("div",{className:"flex gap-3 ".concat("user"===e.type?"justify-end":"justify-start"),children:["user"!==e.type&&(0,t.jsx)(o.h,{icon:"system"===e.type?(0,t.jsx)(L.Z,{size:18}):"collaboration"===e.agentType?(0,t.jsx)(A.Z,{size:18}):r.createElement(G(e.agentType),{size:18}),className:"flex-shrink-0 ".concat("system"===e.type?"bg-gray-100 dark:bg-gray-800":"collaboration"===e.agentType?"bg-gradient-to-r from-purple-500 to-blue-500":"bg-".concat(q(e.agentType),"-100 dark:bg-").concat(q(e.agentType),"-900/20"))}),(0,t.jsxs)("div",{className:"max-w-[80%] ".concat("user"===e.type?"order-first":""),children:[(0,t.jsxs)("div",{className:"p-4 rounded-lg ".concat("user"===e.type?"bg-blue-500 text-white ml-auto":"system"===e.type?"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300":"collaboration"===e.agentType?"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border border-purple-200 dark:border-purple-700":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700"),children:["user"!==e.type&&"system"!==e.type&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-gray-200 dark:border-gray-600",children:[(0,t.jsx)("span",{className:"font-semibold text-sm",children:e.agentName}),e.isRealAgent&&(0,t.jsxs)(d.z,{size:"sm",color:"success",variant:"flat",children:[(0,t.jsx)(B.Z,{size:12,className:"mr-1"}),"Agente Real"]}),"collaboration"===e.agentType&&(0,t.jsxs)(d.z,{size:"sm",color:"secondary",variant:"flat",children:[(0,t.jsx)(A.Z,{size:12,className:"mr-1"}),"Colaborativo"]})]}),(0,t.jsx)("div",{className:"text-sm leading-relaxed",children:"user"===e.type?(0,t.jsx)("div",{className:"whitespace-pre-wrap",children:"string"==typeof e.content?e.content:JSON.stringify(e.content,null,2)}):(0,t.jsx)("div",{className:"markdown-content",children:(0,t.jsx)(U.UG,{remarkPlugins:[K.Z,H.Z],rehypePlugins:[Q.Z],components:{h1:e=>{let{children:s}=e;return(0,t.jsx)("h1",{className:"text-xl font-bold mb-3 text-blue-700 border-b border-blue-200 pb-1",children:s})},h2:e=>{let{children:s}=e;return(0,t.jsx)("h2",{className:"text-lg font-bold mb-2 text-blue-600",children:s})},h3:e=>{let{children:s}=e;return(0,t.jsx)("h3",{className:"text-base font-semibold mb-2 text-blue-500",children:s})},h4:e=>{let{children:s}=e;return(0,t.jsx)("h4",{className:"text-sm font-semibold mb-1 text-blue-400",children:s})},p:e=>{let{children:s}=e;return(0,t.jsx)("p",{className:"mb-2 leading-relaxed",children:s})},blockquote:e=>{let{children:s}=e;return(0,t.jsx)("blockquote",{className:"border-l-4 border-blue-300 bg-blue-50 dark:bg-blue-900/20 pl-3 py-2 mb-2 italic rounded-r-lg",children:s})},code:e=>{let{className:s,children:a,...r}=e,l=/language-(\w+)/.exec(s||""),i=l?l[1]:"";return e.inline?(0,t.jsx)("code",{className:"bg-gray-200 dark:bg-gray-700 text-red-600 dark:text-red-400 px-1 py-0.5 rounded text-xs font-mono",children:a}):(0,t.jsxs)("div",{className:"mb-2",children:[i&&(0,t.jsx)("div",{className:"bg-gray-700 text-white px-2 py-1 text-xs rounded-t",children:i}),(0,t.jsx)("pre",{className:"bg-gray-100 dark:bg-gray-800 p-2 overflow-x-auto font-mono text-xs ".concat(i?"rounded-b":"rounded"),children:(0,t.jsx)("code",{...r,children:a})})]})},ul:e=>{let{children:s}=e;return(0,t.jsx)("ul",{className:"list-disc list-inside mb-2 space-y-0.5 ml-2",children:s})},ol:e=>{let{children:s}=e;return(0,t.jsx)("ol",{className:"list-decimal list-inside mb-2 space-y-0.5 ml-2",children:s})},li:e=>{let{children:s}=e;return(0,t.jsx)("li",{className:"mb-0.5 text-sm",children:s})},table:e=>{let{children:s}=e;return(0,t.jsx)("div",{className:"overflow-x-auto mb-3",children:(0,t.jsx)("table",{className:"min-w-full border-collapse border border-gray-300 dark:border-gray-600 rounded text-xs",children:s})})},thead:e=>{let{children:s}=e;return(0,t.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s})},th:e=>{let{children:s}=e;return(0,t.jsx)("th",{className:"border border-gray-300 dark:border-gray-600 px-2 py-1 text-left font-semibold text-xs",children:s})},td:e=>{let{children:s}=e;return(0,t.jsx)("td",{className:"border border-gray-300 dark:border-gray-600 px-2 py-1 text-xs",children:s})},a:e=>{let{href:s,children:a}=e;return(0,t.jsx)("a",{href:s,className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline transition-colors",target:"_blank",rel:"noopener noreferrer",children:a})},strong:e=>{let{children:s}=e;return(0,t.jsx)("strong",{className:"font-bold",children:s})},em:e=>{let{children:s}=e;return(0,t.jsx)("em",{className:"italic",children:s})},hr:()=>(0,t.jsx)("hr",{className:"my-2 border-t border-gray-200 dark:border-gray-600"})},children:"string"==typeof e.content?e.content:JSON.stringify(e.content,null,2)})})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1 px-2",children:e.timestamp.toLocaleTimeString()})]}),"user"===e.type&&(0,t.jsx)(o.h,{icon:(0,t.jsx)(V.Z,{size:18}),className:"flex-shrink-0 bg-blue-100 dark:bg-blue-900/20"})]},e.id)),y&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.h,{icon:(0,t.jsx)(D.Z,{size:18}),className:"flex-shrink-0 bg-gradient-to-r from-purple-500 to-blue-500"}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border border-purple-200 dark:border-purple-700 p-4 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(R.c,{size:"sm",color:"secondary"}),(0,t.jsx)("span",{className:"text-sm",children:"collaboration"===N?"\uD83E\uDD1D Todos los agentes colaborando en una respuesta unificada...":"⚡ Procesando con todos los especialistas del sistema..."})]}),(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:[Y," agentes trabajando • ",O," sistemas reales activos"]})]})]}),(0,t.jsx)("div",{ref:C})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/10 dark:to-purple-900/10",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(M.Y,{ref:k,value:j,onChange:e=>b(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Z())},placeholder:"Realiza tu consulta al equipo completo de agentes educativos... (Enter para enviar, Shift+Enter para nueva l\xednea)",minRows:2,maxRows:5,className:"flex-1",disabled:y,classNames:{input:"text-sm",inputWrapper:"border-2 border-purple-200 dark:border-purple-700"}}),(0,t.jsx)(c.A,{color:"secondary",size:"lg",onPress:Z,isDisabled:!j.trim()||y,isLoading:y,className:"self-end min-w-[120px]",startContent:!y&&(0,t.jsx)(J.Z,{size:18}),children:y?"Procesando...":"Enviar a Todos"})]}),(0,t.jsx)("div",{className:"mt-3 text-center",children:(0,t.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["\uD83D\uDCA1 ",(0,t.jsx)("strong",{children:"Tip:"})," Cuanto m\xe1s espec\xedfica sea tu pregunta, mejores respuestas obtendr\xe1s de cada especialista"]})})]})]})]})]})}var es=a(40257);class ea{async getDashboardStats(e){if(!e)throw Error("studentId requerido");try{let s=this.baseUrl?/\/api$/.test(this.baseUrl)?this.baseUrl:"".concat(this.baseUrl,"/api"):"/api",a=new AbortController,t=setTimeout(()=>a.abort(),6e3),r=await fetch("".concat(s,"/students/").concat(e,"/dashboard-stats"),{method:"GET",headers:{"Content-Type":"application/json"},signal:a.signal});if(clearTimeout(t),!r.ok)throw Error("Error ".concat(r.status,": ").concat(r.statusText));let l=await r.json();return console.log("✅ Estad\xedsticas del dashboard obtenidas:",l),l}catch(s){return console.error("Error obteniendo estad\xedsticas del dashboard:",(null==s?void 0:s.message)||s),this.getFallbackStats(e)}}async getStudentStats(e){if(!e)throw Error("studentId requerido");try{let s=this.baseUrl?/\/api$/.test(this.baseUrl)?this.baseUrl:"".concat(this.baseUrl,"/api"):"/api",a=new AbortController,t=setTimeout(()=>a.abort(),6e3),r=await fetch("".concat(s,"/students/").concat(e,"/stats"),{method:"GET",headers:{"Content-Type":"application/json"},signal:a.signal});if(clearTimeout(t),!r.ok)throw Error("Error ".concat(r.status,": ").concat(r.statusText));let l=await r.json();return console.log("✅ Estad\xedsticas del estudiante obtenidas:",l),l}catch(e){throw console.error("Error obteniendo estad\xedsticas del estudiante:",(null==e?void 0:e.message)||e),e}}async updateStudentActivity(e,s){try{let a=await fetch("".concat(this.baseUrl,"/api/students/").concat(e,"/activity"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({activity:s,timestamp:new Date().toISOString()})});if(!a.ok)throw Error("Error ".concat(a.status,": ").concat(a.statusText));console.log("✅ Actividad del estudiante actualizada:",s)}catch(e){throw console.error("Error actualizando actividad del estudiante:",e),e}}async getPersonalizedRecommendations(e){try{let s=this.baseUrl?/\/api$/.test(this.baseUrl)?this.baseUrl:"".concat(this.baseUrl,"/api"):"/api",a=new AbortController,t=setTimeout(()=>a.abort(),6e3),r=await fetch("".concat(s,"/students/").concat(e,"/recommendations"),{method:"GET",headers:{"Content-Type":"application/json"},signal:a.signal});if(clearTimeout(t),!r.ok)throw Error("Error ".concat(r.status,": ").concat(r.statusText));let l=await r.json();return console.log("✅ Recomendaciones personalizadas obtenidas:",l),l.recommendations||[]}catch(e){return console.error("Error obteniendo recomendaciones:",(null==e?void 0:e.message)||e),[]}}getFallbackStats(e){let s=new Date,a=s.toISOString().split("T")[0];return{student:{student_id:e,name:e,grade:"10\xb0 Grado",current_level:"Intermedio Alto",overall_progress:78,weekly_goal:85,weekly_progress:72,streak_days:12,today_activity:{lessons_completed:3,exercises_completed:7,points_earned:245,study_time_minutes:95,sessions_count:4},upcoming_classes:[{subject:"Matem\xe1ticas Avanzadas",time:"10:00 AM",teacher:"Prof. Garc\xeda",duration_minutes:50,classroom:"Aula 204"},{subject:"Literatura",time:"11:30 AM",teacher:"Prof. Mart\xednez",duration_minutes:45,classroom:"Aula 101"},{subject:"Qu\xedmica",time:"2:00 PM",teacher:"Prof. L\xf3pez",duration_minutes:60,classroom:"Lab. 3"}],recent_achievements:[{title:"Racha de Estudio",description:"12 d\xedas consecutivos estudiando",date:a,points:50,badge_type:"streak"},{title:"Maestro de \xc1lgebra",description:"Complet\xf3 todos los ejercicios de \xe1lgebra",date:new Date(s.getTime()-864e5).toISOString().split("T")[0],points:100,badge_type:"mastery"},{title:"Participaci\xf3n Activa",description:"Particip\xf3 en 5 sesiones de chat con agentes",date:new Date(s.getTime()-1728e5).toISOString().split("T")[0],points:75,badge_type:"engagement"}],badges:[{id:"streak_master",name:"Maestro de la Constancia",description:"Estudi\xf3 10 d\xedas consecutivos",icon:"\uD83D\uDD25",unlocked_date:a,category:"discipline"},{id:"math_expert",name:"Experto en Matem\xe1ticas",description:"Domin\xf3 los conceptos b\xe1sicos de \xe1lgebra",icon:"\uD83E\uDDEE",unlocked_date:new Date(s.getTime()-864e5).toISOString().split("T")[0],category:"academic"},{id:"ai_collaborator",name:"Colaborador IA",description:"Trabaj\xf3 efectivamente con agentes IA",icon:"\uD83E\uDD16",unlocked_date:new Date(s.getTime()-1728e5).toISOString().split("T")[0],category:"technology"}],subject_stats:[{subject:"Matem\xe1ticas",progress:85,grade:8.5,time_spent_hours:24,exercises_completed:45,last_activity:a},{subject:"Literatura",progress:75,grade:7.8,time_spent_hours:18,exercises_completed:23,last_activity:a},{subject:"Qu\xedmica",progress:68,grade:7.2,time_spent_hours:15,exercises_completed:18,last_activity:new Date(s.getTime()-864e5).toISOString().split("T")[0]}],trends:{weekly_performance:[72,75,78,82,78,85,88],best_study_time:"2:00 PM - 4:00 PM",most_improved_subject:"Matem\xe1ticas",needs_attention:["Qu\xedmica","Participaci\xf3n en clase"]}},system_status:{agents_active:0,total_agents:0,last_interaction:new Date(s.getTime()-3e5).toISOString(),system_health:"good"},recommendations:[]}}constructor(e=""){var s;let a=(void 0!==es?null===(s=es.env)||void 0===s?void 0:"http://localhost:8000":"")||"",t=(e||a).replace(/\/$/,"");this.baseUrl=t}}let et=new ea;var er=a(31309),el=a(19409),ei=a(27985),en=a(25846),ec=a(41671),eo=a(91723),ed=a(99397),em=a(18930),eu=a(83464),ex=a(74780);let eh=(0,ex.X)()+"/api",ep=eu.Z.create({baseURL:eh,timeout:3e4,headers:{"Content-Type":"application/json"}});class eg{setAuthToken(e){this.authToken=e}async request(e){let{retries:s=1,retryDelayMs:a=500,...t}=e;for(let e=0;e<=s;e++)try{let e={...t};return e.headers={...t.headers||{},...this.authToken?{Authorization:"Bearer ".concat(this.authToken)}:{}},(await ep.request(e)).data}catch(c){var r,l,i;let t=null==c?void 0:null===(r=c.response)||void 0===r?void 0:r.status,n=t>=500||!t;if(e<s&&n){await new Promise(s=>setTimeout(s,a*(e+1)));continue}throw Error((null==c?void 0:null===(i=c.response)||void 0===i?void 0:null===(l=i.data)||void 0===l?void 0:l.detail)||(null==c?void 0:c.message)||"Error desconocido")}throw Error("Error de petici\xf3n no especificado")}async getStudentAnalytics(e,s){return this.request({method:"POST",url:"/agents/analytics/analyze",data:{student_id:e,performance_data:s},retries:1})}async getStudentCoaching(e,s){return this.request({method:"POST",url:"/agents/student-coach/get-guidance",data:{student_id:e,context:s,request_type:"personalized_guidance"},retries:1})}async getStudyPlanning(e,s,a){return this.request({method:"POST",url:"/agents/lesson-planner/create-plan",data:{student_id:e,subjects:s,learning_goals:a,duration:"1_month"}})}async analyzeStudentProgress(e,s){return this.request({method:"POST",url:"/agents/document-analyzer/analyze-progress",data:{student_id:e,documents:s,analysis_type:"progress_tracking"}})}async generatePracticeExam(e,s,a){return this.request({method:"POST",url:"/agents/exam-generator/create-exam",data:{student_id:e,subject:s,difficulty:a,question_count:10,exam_type:"practice"}})}async getParentReport(e){return this.request({method:"POST",url:"/agents/analytics/parent-report",data:{student_id:e}})}async getClassroomAnalytics(e,s){return this.request({method:"POST",url:"/agents/analytics/classroom-analytics",data:{class_id:e,students_data:s}})}async coordinateAgents(e){return this.request({method:"POST",url:"/agents/coordinator/execute",data:e})}async getStudentRealTimeData(e){try{return await this.request({method:"GET",url:"/students/".concat(e,"/realtime")})}catch(e){return console.error("Error getting real-time data:",e),null}}async logStudentInteraction(e,s){try{await this.request({method:"POST",url:"/students/interactions",data:{student_id:e,interaction:s,timestamp:new Date().toISOString()}})}catch(e){console.error("Error logging interaction:",e)}}async getPersonalizedRecommendations(e,s){try{return await this.request({method:"POST",url:"/agents/recommendations/generate",data:{student_id:e,context:s,timestamp:new Date().toISOString()},retries:1})}catch(e){return console.error("Error getting recommendations:",e),{recommendations:["Contin\xfaa con tu progreso actual","Revisa los conceptos de la \xfaltima lecci\xf3n","Practica ejercicios de repaso"],priority:"normal",generated_by:"Sistema de respaldo"}}}async startTutoringSession(e,s,a){return this.request({method:"POST",url:"/agents/tutor/start-session",data:{student_id:e,subject:s,questions:a,session_type:"interactive"}})}constructor(){this.authToken=null}}let ej=new eg,eb=()=>({agentService:ej,async getStudentDashboardData(e){let[s,a,t]=await Promise.allSettled([ej.getStudentAnalytics(e,{}),ej.getStudentCoaching(e,{type:"dashboard_overview"}),ej.getStudentRealTimeData(e)]);return{analytics:"fulfilled"===s.status?s.value:null,coaching:"fulfilled"===a.status?a.value:null,realTime:"fulfilled"===t.status?t.value:null}},async logActivity(e,s,a){await ej.logStudentInteraction(e,{type:"activity",activity:s,data:a||{}})}});function ey(e){var s;let{studentData:a}=e,l=null==a?void 0:a.name;if(!l)return(0,t.jsx)("div",{className:"p-6 text-sm text-gray-500",children:"Usuario no autenticado."});let[o,m]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[g,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)(!1),[v,z]=(0,r.useState)(!1),[C,k]=(0,r.useState)("tasks"),{agentService:E,logActivity:A}=eb(),[T,Z]=(0,r.useState)({title:"",subject:"",priority:"media",estimatedTime:60,description:""}),[P,G]=(0,r.useState)({subject:"",goal:"",timeframe:"week",currentLevel:"beginner"});(0,r.useEffect)(()=>{I()},[a]);let I=async()=>{try{await A(l,"study_planner_access"),m([{id:"1",title:"Ensayo de Literatura",subject:"Literatura",dueDate:"2024-01-20",priority:"alta",status:"en-progreso",estimatedTime:120,description:'An\xe1lisis de "Cien a\xf1os de soledad"',difficulty:7,prerequisites:["Lectura del libro","Investigaci\xf3n del autor"]},{id:"2",title:"Ejercicios de \xc1lgebra",subject:"Matem\xe1ticas",dueDate:"2024-01-18",priority:"media",status:"pendiente",estimatedTime:60,description:"Cap\xedtulo 5: Ecuaciones cuadr\xe1ticas",difficulty:5,aiGenerated:!0}]),p([{id:"1",title:"Dominar C\xe1lculo Diferencial",subject:"Matem\xe1ticas",totalHours:40,weeklyGoal:8,topics:["L\xedmites","Derivadas","Aplicaciones"],progress:35,createdByAI:!0}])}catch(e){console.error("Error loading study data:",e)}},R=async()=>{if(P.subject&&P.goal){j(!0);try{await A(l,"ai_study_plan_request",{subject:P.subject,goal:P.goal,level:P.currentLevel});let e={id:Date.now().toString(),title:"Plan de Estudio: ".concat(P.goal),subject:P.subject,totalHours:"week"===P.timeframe?10:40,weeklyGoal:"week"===P.timeframe?10:8,topics:q(P.subject),progress:0,createdByAI:!0};p(s=>[...s,e]);let s=O(e);m(e=>[...e,...s]),z(!1),G({subject:"",goal:"",timeframe:"week",currentLevel:"beginner"})}catch(e){console.error("Error generating AI study plan:",e)}finally{j(!1)}}},q=e=>({Matemáticas:["Fundamentos","Pr\xe1ctica","Aplicaciones","Evaluaci\xf3n"],Literatura:["Lectura","An\xe1lisis","Redacci\xf3n","Cr\xedtica"],Química:["Teor\xeda","Experimentos","F\xf3rmulas","Aplicaciones"],Física:["Conceptos","Problemas","Laboratorio","Proyecto"],Historia:["Investigaci\xf3n","Cronolog\xeda","An\xe1lisis","Ensayo"],Inglés:["Vocabulario","Gram\xe1tica","Conversaci\xf3n","Escritura"]})[e]||["Estudio","Pr\xe1ctica","Evaluaci\xf3n","Repaso"],O=e=>e.topics.map((s,a)=>({id:"ai_".concat(Date.now(),"_").concat(a),title:"".concat(s," - ").concat(e.subject),subject:e.subject,dueDate:new Date(Date.now()+(a+1)*864e5).toISOString().split("T")[0],priority:0===a?"alta":"media",status:"pendiente",estimatedTime:Math.floor(e.totalHours/e.topics.length*60),description:"Tarea generada por IA para el plan: ".concat(e.title),aiGenerated:!0,difficulty:Math.floor(5*Math.random())+3})),F={alta:"danger",media:"warning",baja:"success"},L={pendiente:"default","en-progreso":"primary",completada:"success"},B=["Matem\xe1ticas","Literatura","Qu\xedmica","F\xedsica","Historia","Ingl\xe9s","Biolog\xeda","Geograf\xeda"],V=async()=>{if(T.title&&T.subject){let e={id:Date.now().toString(),title:T.title,subject:T.subject,dueDate:T.dueDate||new Date().toISOString().split("T")[0],priority:T.priority||"media",status:"pendiente",estimatedTime:T.estimatedTime||60,description:T.description};m([...o,e]),Z({title:"",subject:"",priority:"media",estimatedTime:60,description:""}),N(!1),await A(l,"task_created",{title:e.title,subject:e.subject,priority:e.priority})}},J=async(e,s)=>{m(o.map(a=>a.id===e?{...a,status:s}:a)),await A(l,"task_status_updated",{taskId:e,newStatus:s});let a=o.find(s=>s.id===e);(null==a?void 0:a.aiGenerated)&&"completada"===s&&U(a.subject)},U=e=>{p(s=>s.map(s=>{if(s.subject===e){let a=o.filter(s=>s.subject===e&&"completada"===s.status&&s.aiGenerated).length+1,t=o.filter(s=>s.subject===e&&s.aiGenerated).length;return{...s,progress:Math.min(100,a/t*100)}}return s}))},K=async e=>{let s=o.find(s=>s.id===e);m(o.filter(s=>s.id!==e)),await A(l,"task_deleted",{taskId:e,title:null==s?void 0:s.title})},H=e=>o.filter(s=>s.status===e);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg",children:(0,t.jsx)(D.Z,{className:"text-white",size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Planificador Inteligente Julia"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Organiza tu estudio con ayuda de IA"})]})]}),(0,t.jsx)(c.A,{color:"secondary",startContent:(0,t.jsx)(en.Z,{size:16}),onPress:()=>z(!0),isLoading:g,children:"Crear Plan con IA"})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)(_.Z,{className:"mx-auto text-julia-primary mb-2",size:24}),(0,t.jsx)("p",{className:"text-2xl font-bold text-julia-primary",children:o.length}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tareas Totales"})]})}),(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)(ec.Z,{className:"mx-auto text-green-500 mb-2",size:24}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-500",children:H("completada").length}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completadas"})]})}),(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)(b.Z,{className:"mx-auto text-orange-500 mb-2",size:24}),(0,t.jsx)("p",{className:"text-2xl font-bold text-orange-500",children:H("pendiente").length}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pendientes"})]})}),(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)(eo.Z,{className:"mx-auto text-purple-500 mb-2",size:24}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-purple-500",children:[Math.round(o.reduce((e,s)=>e+s.estimatedTime,0)/60),"h"]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tiempo Total"})]})}),(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)(D.Z,{className:"mx-auto text-blue-500 mb-2",size:24}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:o.filter(e=>e.aiGenerated).length}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tareas IA"})]})})]}),v&&(0,t.jsxs)(i.w,{className:"julia-card border-2 border-purple-200 dark:border-purple-800",children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(D.Z,{className:"text-purple-500",size:20}),(0,t.jsx)("h4",{className:"text-lg font-semibold",children:"Crear Plan de Estudio con IA"})]})}),(0,t.jsxs)(n.G,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(er.g,{label:"Materia",placeholder:"Selecciona una materia",selectedKeys:P.subject?[P.subject]:[],onSelectionChange:e=>G({...P,subject:Array.from(e)[0]}),children:B.map(e=>(0,t.jsx)(el.R,{value:e,children:e},e))}),(0,t.jsxs)(er.g,{label:"Nivel actual",selectedKeys:[P.currentLevel],onSelectionChange:e=>G({...P,currentLevel:Array.from(e)[0]}),children:[(0,t.jsx)(el.R,{value:"beginner",children:"Principiante"},"beginner"),(0,t.jsx)(el.R,{value:"intermediate",children:"Intermedio"},"intermediate"),(0,t.jsx)(el.R,{value:"advanced",children:"Avanzado"},"advanced")]})]}),(0,t.jsx)(ei.Y,{label:"Objetivo de aprendizaje",placeholder:"Ej: Dominar ecuaciones cuadr\xe1ticas",value:P.goal,onValueChange:e=>G({...P,goal:e})}),(0,t.jsxs)(er.g,{label:"Marco temporal",selectedKeys:[P.timeframe],onSelectionChange:e=>G({...P,timeframe:Array.from(e)[0]}),children:[(0,t.jsx)(el.R,{value:"week",children:"1 Semana"},"week"),(0,t.jsx)(el.R,{value:"month",children:"1 Mes"},"month"),(0,t.jsx)(el.R,{value:"quarter",children:"3 Meses"},"quarter")]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.A,{color:"secondary",onPress:R,isLoading:g,startContent:!g&&(0,t.jsx)(D.Z,{size:16}),children:g?"Generando Plan...":"Generar con IA"}),(0,t.jsx)(c.A,{variant:"ghost",onPress:()=>z(!1),children:"Cancelar"})]})]})]}),u.length>0&&(0,t.jsxs)(i.w,{className:"julia-card",children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"text-blue-500",size:20}),(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Planes de Estudio Activos"})]})}),(0,t.jsx)(n.G,{children:(0,t.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h4",{className:"font-semibold",children:e.title}),e.createdByAI&&(0,t.jsxs)(d.z,{size:"sm",color:"secondary",variant:"flat",children:[(0,t.jsx)(D.Z,{size:12,className:"mr-1"}),"IA"]})]}),(0,t.jsx)(d.z,{size:"sm",color:"primary",children:e.subject})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,t.jsx)("span",{children:"Progreso"}),(0,t.jsxs)("span",{children:[Math.round(e.progress),"%"]})]}),(0,t.jsx)(x.W,{value:e.progress,color:"secondary",className:"mb-2"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:[e.totalHours,"h total"]}),(0,t.jsxs)("span",{children:[e.weeklyGoal,"h/semana"]}),(0,t.jsxs)("span",{children:[e.topics.length," temas"]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.topics.map((e,s)=>(0,t.jsx)(d.z,{size:"sm",variant:"flat",children:e},s))})]},e.id))})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Mis Tareas"}),(0,t.jsx)(c.A,{color:"primary",startContent:(0,t.jsx)(ed.Z,{size:16}),onPress:()=>N(!y),children:"Nueva Tarea"})]}),y&&(0,t.jsxs)(i.w,{className:"julia-card",children:[(0,t.jsx)(h.u,{children:(0,t.jsx)("h4",{className:"text-lg font-semibold",children:"Agregar Nueva Tarea"})}),(0,t.jsxs)(n.G,{className:"space-y-4",children:[(0,t.jsx)(ei.Y,{label:"T\xedtulo de la tarea",placeholder:"Ej: Ensayo de historia",value:T.title,onValueChange:e=>Z({...T,title:e})}),(0,t.jsx)(er.g,{label:"Materia",placeholder:"Selecciona una materia",selectedKeys:T.subject?[T.subject]:[],onSelectionChange:e=>Z({...T,subject:Array.from(e)[0]}),children:B.map(e=>(0,t.jsx)(el.R,{value:e,children:e},e))}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)(er.g,{label:"Prioridad",selectedKeys:[T.priority||"media"],onSelectionChange:e=>Z({...T,priority:Array.from(e)[0]}),children:[(0,t.jsx)(el.R,{value:"alta",children:"Alta"},"alta"),(0,t.jsx)(el.R,{value:"media",children:"Media"},"media"),(0,t.jsx)(el.R,{value:"baja",children:"Baja"},"baja")]}),(0,t.jsx)(ei.Y,{type:"number",label:"Tiempo estimado (minutos)",value:null===(s=T.estimatedTime)||void 0===s?void 0:s.toString(),onValueChange:e=>Z({...T,estimatedTime:parseInt(e)||60})})]}),(0,t.jsx)(M.Y,{label:"Descripci\xf3n",placeholder:"Detalles adicionales sobre la tarea",value:T.description,onValueChange:e=>Z({...T,description:e})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.A,{color:"primary",onPress:V,children:"Agregar Tarea"}),(0,t.jsx)(c.A,{variant:"ghost",onPress:()=>N(!1),children:"Cancelar"})]})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:o.map(e=>(0,t.jsx)(i.w,{className:"julia-card hover-lift",children:(0,t.jsx)(n.G,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-800 dark:text-white",children:e.title}),(0,t.jsx)(d.z,{size:"sm",color:F[e.priority],variant:"flat",children:e.priority}),(0,t.jsx)(d.z,{size:"sm",color:L[e.status],variant:"flat",children:e.status}),e.aiGenerated&&(0,t.jsxs)(d.z,{size:"sm",color:"secondary",variant:"flat",children:[(0,t.jsx)(D.Z,{size:10,className:"mr-1"}),"IA"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(w.Z,{size:14}),e.subject]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(S.Z,{size:14}),e.dueDate]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(eo.Z,{size:14}),e.estimatedTime," min"]}),e.difficulty&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(_.Z,{size:14}),"Dificultad: ",e.difficulty,"/10"]})]}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.description}),e.prerequisites&&e.prerequisites.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mb-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Prerequisitos:"}),e.prerequisites.map((e,s)=>(0,t.jsx)(d.z,{size:"sm",variant:"flat",color:"default",children:e},s))]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:["pendiente"===e.status&&(0,t.jsx)(c.A,{size:"sm",color:"primary",variant:"flat",onPress:()=>J(e.id,"en-progreso"),children:"Iniciar"}),"en-progreso"===e.status&&(0,t.jsx)(c.A,{size:"sm",color:"success",variant:"flat",onPress:()=>J(e.id,"completada"),children:"Completar"}),(0,t.jsx)(c.A,{size:"sm",color:"danger",variant:"light",isIconOnly:!0,onPress:()=>K(e.id),children:(0,t.jsx)(em.Z,{size:14})})]})]})})},e.id))})]}),(0,t.jsxs)(i.w,{className:"julia-card",children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(S.Z,{className:"text-julia-primary",size:20}),(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Esta Semana"})]})}),(0,t.jsx)(n.G,{children:(0,t.jsx)("div",{className:"space-y-4",children:(()=>{let e=new Date,s=[];for(let a=0;a<7;a++){let t=new Date(e);t.setDate(e.getDate()+a),s.push({date:t.toISOString().split("T")[0],dayName:t.toLocaleDateString("es",{weekday:"short"}),tasks:o.filter(e=>e.dueDate===t.toISOString().split("T")[0])})}return s})().map((e,s)=>(0,t.jsxs)("div",{className:"border-l-4 border-julia-primary pl-4",children:[(0,t.jsxs)("h4",{className:"font-semibold text-gray-800 dark:text-white capitalize",children:[e.dayName," ",e.date.split("-")[2]]}),e.tasks.length>0?(0,t.jsx)("div",{className:"space-y-2 mt-2",children:e.tasks.map(e=>(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium text-gray-700 dark:text-gray-300",children:e.title}),e.aiGenerated&&(0,t.jsx)(D.Z,{size:10,className:"text-purple-500"})]}),(0,t.jsx)("p",{className:"text-gray-500",children:e.subject})]},e.id))}):(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Sin tareas programadas"})]},s))})})]})]}),(0,t.jsx)(i.w,{className:"border-2 border-dashed border-gray-300 dark:border-gray-600",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["\uD83E\uDDE0 ",(0,t.jsx)("strong",{children:"Planificador Julia:"})," ",o.filter(e=>e.aiGenerated).length," tareas generadas por IA • ",u.length," planes activos"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Sistema de planificaci\xf3n inteligente con seguimiento de progreso y recomendaciones personalizadas"})]})})]})}var ef=a(81596),eN=a(47625),ev=a(21156),ew=a(56940),eD=a(97059),e_=a(62994),eS=a(8147),ez=a(54061),eC=a(75169),ek=a(3574),eE=a(20407),eA=a(77031),eT=a(31699);async function eZ(e,s){let a=((0,ex.X)()+"/api").replace(/\/$/,""),t="".concat(a,"/students/").concat(encodeURIComponent(e),"/progress?period=").concat(s),r=await fetch(t);if(404===r.status){let t=a.endsWith("/api")?a.replace(/\/api$/,"")+"/students/".concat(encodeURIComponent(e),"/progress?period=").concat(s):a+"/students/".concat(encodeURIComponent(e),"/progress?period=").concat(s);r=await fetch(t)}if(!r.ok)throw Error("Failed to load progress");return r.json()}let eP=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function eG(e){let{studentData:s}=e,{user:a}=(0,l.a)(),c=(null==s?void 0:s.name)||(null==a?void 0:a.id),[o,p]=(0,r.useState)([]),[g,j]=(0,r.useState)([]),[b,N]=(0,r.useState)([]),[v,S]=(0,r.useState)(!0),[z,C]=(0,r.useState)("week"),[k,A]=(0,r.useState)("overview"),{agentService:T,logActivity:Z}=eb();(0,r.useEffect)(()=>{c&&P()},[c,z]);let P=async()=>{S(!0);try{if(!c)return;await Z(c,"progress_tracker_access");let e=await eZ(c,z),s=(e.subjects||[]).map(e=>{var s,a;return{subject:e.subject,progress:null!==(s=e.progress)&&void 0!==s?s:0,grade:null!==(a=e.grade)&&void 0!==a?a:0,trend:e.trend||"stable",timeSpent:Math.round(60*(e.time_spent_hours||0)),completedTasks:e.exercises_completed||0,totalTasks:Math.max(e.exercises_completed||0,1)}});p(s);let a=[];if(e.recent_achievements)for(let s of e.recent_achievements)a.push({id:s.id||s.title||Math.random().toString(36).slice(2),title:s.title||s.name||"Logro",description:s.description||"",icon:s.icon||"\uD83C\uDFC6",unlockedAt:new Date(s.date||s.unlocked_date||Date.now()),category:"academic"});if(e.badges)for(let s of e.badges)a.push({id:s.id||s.name,title:s.name||"Badge",description:s.description||"",icon:s.icon||"\uD83C\uDF96️",unlockedAt:new Date(s.unlocked_date||Date.now()),category:"skill"});j(a);let t=(e.sessions||[]).map(e=>({date:e.date,duration:e.duration,subject:e.subject,performance:e.performance}));N(t)}catch(e){console.error("Error loading progress data:",e)}finally{S(!1)}},G=e=>{switch(e){case"up":return(0,t.jsx)(f.Z,{className:"text-green-500",size:16});case"down":return(0,t.jsx)(f.Z,{className:"text-red-500 rotate-180",size:16});default:return(0,t.jsx)("div",{className:"w-4 h-0.5 bg-gray-400 rounded"})}},I=()=>0===o.length?0:Math.round(o.reduce((e,s)=>e+s.progress,0)/o.length),R=o.map(e=>({name:e.subject,value:e.timeSpent})),M=b.map(e=>({date:e.date.split("-")[2],performance:e.performance,duration:e.duration}));return v?(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{className:"text-center py-8",children:[(0,t.jsx)(D.Z,{className:"mx-auto text-julia-primary mb-4 animate-pulse",size:48}),(0,t.jsx)("p",{children:"Analizando tu progreso..."})]})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-green-500 to-blue-600 rounded-lg",children:(0,t.jsx)(y.Z,{className:"text-white",size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Seguimiento de Progreso"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"An\xe1lisis inteligente de tu rendimiento acad\xe9mico"})]})]}),(0,t.jsxs)(er.g,{label:"Per\xedodo",size:"sm",selectedKeys:[z],onSelectionChange:e=>C(Array.from(e)[0]),className:"w-32",children:[(0,t.jsx)(el.R,{value:"week",children:"Semana"},"week"),(0,t.jsx)(el.R,{value:"month",children:"Mes"},"month"),(0,t.jsx)(el.R,{value:"quarter",children:"Trimestre"},"quarter")]})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)(_.Z,{className:"mx-auto text-blue-500 mb-2",size:24}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-blue-500",children:[I(),"%"]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Progreso General"}),(0,t.jsx)(x.W,{value:I(),color:"primary",className:"mt-2"})]})}),(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)(E.Z,{className:"mx-auto text-yellow-500 mb-2",size:24}),(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-500",children:0===o.length?0:(o.reduce((e,s)=>e+s.grade,0)/o.length).toFixed(1)}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Promedio General"})]})}),(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)(eo.Z,{className:"mx-auto text-purple-500 mb-2",size:24}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-purple-500",children:[Math.round(o.reduce((e,s)=>e+s.timeSpent,0)/60),"h"]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tiempo Total"})]})}),(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)(w.Z,{className:"mx-auto text-green-500 mb-2",size:24}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-500",children:o.reduce((e,s)=>e+s.completedTasks,0)}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tareas Completadas"})]})})]}),(0,t.jsxs)(m.n,{selectedKey:k,onSelectionChange:e=>A(String(e)),children:[(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.Z,{size:16}),(0,t.jsx)("span",{children:"Resumen"})]})},"overview"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.Z,{size:16}),(0,t.jsx)("span",{children:"Por Materias"})]})},"subjects"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(E.Z,{size:16}),(0,t.jsx)("span",{children:"Logros"})]})},"achievements"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ef.Z,{size:16}),(0,t.jsx)("span",{children:"An\xe1lisis"})]})},"analytics")]}),"overview"===k&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(i.w,{className:"julia-card",children:[(0,t.jsx)(h.u,{children:(0,t.jsx)("h4",{className:"font-semibold",children:"Rendimiento Semanal"})}),(0,t.jsx)(n.G,{children:(0,t.jsx)(eN.h,{width:"100%",height:250,children:(0,t.jsxs)(ev.w,{data:M,children:[(0,t.jsx)(ew.q,{strokeDasharray:"3 3"}),(0,t.jsx)(eD.K,{dataKey:"date"}),(0,t.jsx)(e_.B,{}),(0,t.jsx)(eS.u,{}),(0,t.jsx)(ez.x,{type:"monotone",dataKey:"performance",stroke:"#8884d8",strokeWidth:2,dot:{fill:"#8884d8"}})]})})})]}),(0,t.jsxs)(i.w,{className:"julia-card",children:[(0,t.jsx)(h.u,{children:(0,t.jsx)("h4",{className:"font-semibold",children:"Tiempo por Materia"})}),(0,t.jsxs)(n.G,{children:[(0,t.jsx)(eN.h,{width:"100%",height:250,children:(0,t.jsxs)(eC.u,{children:[(0,t.jsx)(ek.b,{data:R,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:R.map((e,s)=>(0,t.jsx)(eE.b,{fill:eP[s%eP.length]},"cell-".concat(s)))}),(0,t.jsx)(eS.u,{formatter:e=>["".concat(e," min"),"Tiempo"]})]})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:R.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:eP[s%eP.length]}}),(0,t.jsx)("span",{children:e.name})]},e.name))})]})]})]}),"subjects"===k&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map((e,s)=>(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h4",{className:"font-semibold text-lg",children:e.subject}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[G(e.trend),(0,t.jsxs)(d.z,{size:"sm",color:e.grade>=8?"success":e.grade>=6?"warning":"danger",children:[e.grade,"/10"]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{children:"Progreso del Curso"}),(0,t.jsxs)("span",{children:[e.progress,"%"]})]}),(0,t.jsx)(x.W,{value:e.progress,color:"primary"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Tiempo de Estudio"}),(0,t.jsxs)("p",{className:"font-semibold",children:[Math.round(e.timeSpent/60),"h ",e.timeSpent%60,"min"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Tareas"}),(0,t.jsxs)("p",{className:"font-semibold",children:[e.completedTasks,"/",e.totalTasks]})]})]})]})]})},e.subject))}),"achievements"===k&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(e=>(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-3",children:e.icon}),(0,t.jsx)("h4",{className:"font-semibold mb-2",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,t.jsx)(d.z,{size:"sm",variant:"flat",color:"academic"===e.category?"primary":"time"===e.category?"secondary":"streak"===e.category?"warning":"success",children:e.category}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Desbloqueado: ",e.unlockedAt.toLocaleDateString()]})]})},e.id))}),"analytics"===k&&(0,t.jsxs)(i.w,{className:"julia-card",children:[(0,t.jsx)(h.u,{children:(0,t.jsx)("h4",{className:"font-semibold",children:"An\xe1lisis de Rendimiento por D\xeda"})}),(0,t.jsx)(n.G,{children:(0,t.jsx)(eN.h,{width:"100%",height:300,children:(0,t.jsxs)(eA.v,{data:M,children:[(0,t.jsx)(ew.q,{strokeDasharray:"3 3"}),(0,t.jsx)(eD.K,{dataKey:"date"}),(0,t.jsx)(e_.B,{}),(0,t.jsx)(eS.u,{}),(0,t.jsx)(eT.$,{dataKey:"performance",fill:"#8884d8"}),(0,t.jsx)(eT.$,{dataKey:"duration",fill:"#82ca9d"})]})})})]}),(0,t.jsx)(i.w,{className:"border-2 border-dashed border-gray-300 dark:border-gray-600",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["\uD83D\uDCCA ",(0,t.jsx)("strong",{children:"Analytics Julia:"})," Datos en tiempo real del sistema de seguimiento acad\xe9mico"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"An\xe1lisis impulsado por IA • M\xe9tricas personalizadas • Recomendaciones autom\xe1ticas"})]})})]})}var eI=a(82718);function eR(e){let{studentData:s}=e,a=null==s?void 0:s.name;if(!a)return(0,t.jsx)("div",{className:"p-6 text-sm text-gray-500",children:"Usuario no autenticado."});let[l,m]=(0,r.useState)([]),[u,x]=(0,r.useState)(""),[p,g]=(0,r.useState)(!1),[j,b]=(0,r.useState)(null),[y,f]=(0,r.useState)(!1),N=(0,r.useRef)(null),{agentService:v,logActivity:w}=eb();(0,r.useEffect)(()=>{z()},[s]),(0,r.useEffect)(()=>{S()},[l]);let S=()=>{var e;null===(e=N.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},z=async()=>{try{var e;g(!0),await w(a,"ai_coach_init");let t=await v.getStudentCoaching(a,{type:"coaching_session_init",student_context:{name:null==s?void 0:s.name,grade:null==s?void 0:s.grade,current_time:new Date().toISOString()}});b(t);let r={id:Date.now().toString(),content:(null==t?void 0:t.welcome_message)||"\xa1Hola ".concat(a,"! \uD83D\uDC4B Soy tu Coach IA personalizado. Estoy aqu\xed para ayudarte a alcanzar tus objetivos acad\xe9micos. \xbfEn qu\xe9 puedo ayudarte hoy?"),sender:"coach",timestamp:new Date,type:"text",metadata:{source:"ai_agent_initialization"}};if(m([r]),(null==t?void 0:null===(e=t.initial_recommendations)||void 0===e?void 0:e.length)>0){let e={id:(Date.now()+1).toString(),content:"Bas\xe1ndome en tu progreso reciente, tengo algunas recomendaciones personalizadas para ti:",sender:"coach",timestamp:new Date,type:"recommendation",metadata:{recommendations:t.initial_recommendations,source:"ai_agent_analysis"}};m(s=>[...s,e])}f(!0)}catch(e){console.error("Error initializing coach:",e),m([{id:Date.now().toString(),content:"\xa1Hola! Soy tu Coach IA. Estoy conect\xe1ndome con el sistema Julia para brindarte la mejor ayuda personalizada. \xa1Preg\xfantame lo que necesites!",sender:"coach",timestamp:new Date,type:"text",metadata:{source:"fallback"}}]),f(!0)}finally{g(!1)}},C=async()=>{if(!u.trim()||p)return;let e={id:Date.now().toString(),content:u,sender:"student",timestamp:new Date,type:"text"};m(s=>[...s,e]),x(""),g(!0);try{await w(a,"ai_coach_interaction",{question:u,timestamp:new Date().toISOString()});let e=await v.getStudentCoaching(a,{type:"interactive_coaching",message:u,conversation_history:l.slice(-5),session_id:null==j?void 0:j.session_id}),s={id:Date.now().toString(),content:(null==e?void 0:e.response)||(null==e?void 0:e.guidance)||"Perm\xedteme analizar tu situaci\xf3n para darte la mejor recomendaci\xf3n...",sender:"coach",timestamp:new Date,type:(null==e?void 0:e.type)||"text",metadata:{confidence:null==e?void 0:e.confidence,recommendations:null==e?void 0:e.recommendations,insights:null==e?void 0:e.insights,source:"ai_agent_response"}};if(m(e=>[...e,s]),null==e?void 0:e.analysis){let s={id:(Date.now()+1).toString(),content:e.analysis,sender:"coach",timestamp:new Date,type:"analysis",metadata:{source:"ai_agent_analysis"}};setTimeout(()=>{m(e=>[...e,s])},1e3)}}catch(s){console.error("Error getting coach response:",s);let e={id:Date.now().toString(),content:"Estoy procesando tu consulta con el sistema Julia. Mientras tanto, \xbfpodr\xedas darme m\xe1s detalles sobre lo que necesitas?",sender:"coach",timestamp:new Date,type:"text",metadata:{source:"error_fallback"}};m(s=>[...s,e])}finally{g(!1)}},k=async e=>{x(e),setTimeout(()=>C(),100)};return y?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.h,{icon:(0,t.jsx)(D.Z,{size:24}),className:"bg-gradient-to-r from-purple-500 to-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Coach IA Personalizado"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Conectado con sistema Julia • ",y?"Activo":"Inicializando"]})]}),(0,t.jsx)("div",{className:"ml-auto",children:(0,t.jsx)(d.z,{color:"success",size:"sm",children:"En l\xednea"})})]})})}),(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsxs)(n.G,{children:[(0,t.jsxs)("div",{className:"h-96 overflow-y-auto p-4 border border-gray-200 dark:border-gray-700 rounded-lg mb-4",children:[l.map(e=>{var s,a,r;let l="coach"===e.sender;return(0,t.jsx)("div",{className:"flex ".concat(l?"justify-start":"justify-end"," mb-4"),children:(0,t.jsxs)("div",{className:"flex items-start gap-3 max-w-[80%] ".concat(l?"flex-row":"flex-row-reverse"),children:[l&&(0,t.jsx)(o.h,{icon:(0,t.jsx)(D.Z,{size:20}),className:"bg-gradient-to-r from-purple-500 to-blue-500",size:"sm"}),(0,t.jsxs)("div",{className:"px-4 py-3 rounded-lg ".concat(l?"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200":"bg-blue-500 text-white"),children:[(0,t.jsx)("p",{className:"text-sm",children:e.content}),"recommendation"===e.type&&(null===(s=e.metadata)||void 0===s?void 0:s.recommendations)&&(0,t.jsx)("div",{className:"mt-3 space-y-2",children:e.metadata.recommendations.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-2 text-xs bg-blue-50 dark:bg-blue-900/20 p-2 rounded",children:[(0,t.jsx)(en.Z,{size:12,className:"text-blue-500 mt-0.5"}),(0,t.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:e})]},s))}),(null===(a=e.metadata)||void 0===a?void 0:a.insights)&&(0,t.jsxs)("div",{className:"mt-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-green-700 dark:text-green-300",children:[(0,t.jsx)(B.Z,{size:12}),(0,t.jsx)("span",{className:"font-medium",children:"Insight:"})]}),(0,t.jsx)("p",{className:"text-green-600 dark:text-green-400 mt-1",children:e.metadata.insights})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,t.jsx)("span",{className:"text-xs opacity-60",children:e.timestamp.toLocaleTimeString()}),(null===(r=e.metadata)||void 0===r?void 0:r.source)&&(0,t.jsx)(d.z,{size:"sm",variant:"flat",className:"text-xs",children:"ai_agent_response"===e.metadata.source?"IA Real":"Sistema"})]})]})]})},e.id)}),p&&(0,t.jsx)("div",{className:"flex justify-start mb-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.h,{icon:(0,t.jsx)(D.Z,{size:20}),className:"bg-gradient-to-r from-purple-500 to-blue-500",size:"sm"}),(0,t.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 px-4 py-3 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(R.c,{size:"sm"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Analizando con IA..."})]})})]})}),(0,t.jsx)("div",{ref:N})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(M.Y,{value:u,onValueChange:x,placeholder:"Escribe tu pregunta o inquietud...",className:"flex-1",minRows:1,maxRows:3,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),C())}}),(0,t.jsx)(c.A,{color:"primary",onPress:C,isLoading:p,isDisabled:!u.trim(),className:"self-end",children:(0,t.jsx)(J.Z,{size:16})})]})]})}),(0,t.jsxs)(i.w,{className:"julia-card",children:[(0,t.jsx)(h.u,{children:(0,t.jsx)("h4",{className:"font-semibold",children:"\uD83D\uDCAC Preguntas Frecuentes"})}),(0,t.jsx)(n.G,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,t.jsxs)(c.A,{variant:"flat",size:"sm",onPress:()=>k("\xbfC\xf3mo puedo mejorar mis calificaciones?"),className:"justify-start h-auto p-3",children:[(0,t.jsx)(_.Z,{size:16,className:"mr-2"}),(0,t.jsx)("span",{className:"text-left",children:"\xbfC\xf3mo puedo mejorar mis calificaciones?"})]}),(0,t.jsxs)(c.A,{variant:"flat",size:"sm",onPress:()=>k("\xbfQu\xe9 estrategias de estudio me recomiendas?"),className:"justify-start h-auto p-3",children:[(0,t.jsx)(en.Z,{size:16,className:"mr-2"}),(0,t.jsx)("span",{className:"text-left",children:"\xbfQu\xe9 estrategias de estudio me recomiendas?"})]}),(0,t.jsxs)(c.A,{variant:"flat",size:"sm",onPress:()=>k("\xbfC\xf3mo manejo el estr\xe9s acad\xe9mico?"),className:"justify-start h-auto p-3",children:[(0,t.jsx)(eI.Z,{size:16,className:"mr-2"}),(0,t.jsx)("span",{className:"text-left",children:"\xbfC\xf3mo manejo el estr\xe9s acad\xe9mico?"})]}),(0,t.jsxs)(c.A,{variant:"flat",size:"sm",onPress:()=>k("\xbfCu\xe1les son mis fortalezas acad\xe9micas?"),className:"justify-start h-auto p-3",children:[(0,t.jsx)(B.Z,{size:16,className:"mr-2"}),(0,t.jsx)("span",{className:"text-left",children:"\xbfCu\xe1les son mis fortalezas acad\xe9micas?"})]})]})})]}),(0,t.jsx)(i.w,{className:"border-2 border-dashed border-gray-300 dark:border-gray-600",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["\uD83E\uDD16 ",(0,t.jsx)("strong",{children:"Coach IA Julia:"})," ",j?"Sesi\xf3n activa":"Inicializando"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Powered by Sistema Multiagente Julia • Respuestas en tiempo real"})]})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(R.c,{size:"lg",color:"primary"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Inicializando Coach IA..."}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Conectando con agentes de Julia"})]})})}var eM=a(29270),eq=a(29374),eO=a(48662),eF=a(53581),eL=a(80512),eB=a(74394),eV=a(29202);function eJ(e){let{studentData:s}=e,a=null==s?void 0:s.name;if(!a)return(0,t.jsx)("div",{className:"p-6 text-sm text-gray-500",children:"Usuario no autenticado."});let[l,x]=(0,r.useState)(null),[p,g]=(0,r.useState)([]),[j,b]=(0,r.useState)([]),[y,f]=(0,r.useState)(""),[N,v]=(0,r.useState)(!1),[D,_]=(0,r.useState)("live"),{agentService:z,logActivity:C}=eb();(0,r.useEffect)(()=>{k()},[s]);let k=async()=>{try{await C(a,"virtual_classroom_access");let e=[{id:"1",title:"\xc1lgebra Avanzada",subject:"Matem\xe1ticas",teacher:"Prof. Garc\xeda",time:"09:00",duration:50,participants:24,status:"live"},{id:"2",title:"Qu\xedmica Org\xe1nica",subject:"Qu\xedmica",teacher:"Prof. Mart\xednez",time:"11:00",duration:45,participants:18,status:"upcoming"},{id:"3",title:"Literatura Contempor\xe1nea",subject:"Literatura",teacher:"Prof. L\xf3pez",time:"14:00",duration:40,participants:22,status:"upcoming"}];g(e),x(e.find(e=>"live"===e.status)||null);let s=[{id:"1",sender:"Prof. Garc\xeda",message:"Buenos d\xedas clase, hoy veremos ecuaciones cuadr\xe1ticas",timestamp:new Date(Date.now()-3e5),type:"teacher"},{id:"2",sender:"Ana",message:"\xbfPodr\xeda repetir la f\xf3rmula por favor?",timestamp:new Date(Date.now()-24e4),type:"student"},{id:"3",sender:"Sistema",message:"Mar\xeda se uni\xf3 a la clase",timestamp:new Date(Date.now()-18e4),type:"system"}];b(s)}catch(e){console.error("Error loading classroom data:",e)}},E=async()=>{if(!y.trim())return;let e={id:Date.now().toString(),sender:(null==s?void 0:s.name)||"Estudiante",message:y,timestamp:new Date,type:"student"};b(s=>[...s,e]),f(""),await C(a,"classroom_message",{session:null==l?void 0:l.id,message:y})},T=async()=>{v(!N),await C(a,"hand_raised",{session:null==l?void 0:l.id,raised:!N});let e={id:Date.now().toString(),sender:"Sistema",message:"".concat((null==s?void 0:s.name)||"Estudiante"," ").concat(N?"baj\xf3":"levant\xf3"," la mano"),timestamp:new Date,type:"system"};b(s=>[...s,e])},Z=async e=>{x(e),await C(a,"join_session",{session:e.id,subject:e.subject});let t={id:Date.now().toString(),sender:"Sistema",message:"".concat((null==s?void 0:s.name)||"Estudiante"," se uni\xf3 a la clase"),timestamp:new Date,type:"system"};b(e=>[...e,t])};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:(0,t.jsx)(A.Z,{className:"text-white",size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Aula Virtual Julia"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:l?"En vivo: ".concat(l.title):"No hay sesi\xf3n activa"})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(eM.O,{content:p.filter(e=>"live"===e.status).length,color:"danger",children:(0,t.jsxs)(d.z,{color:"success",size:"sm",children:[p.filter(e=>"live"===e.status).length," En Vivo"]})})})]})})}),(0,t.jsxs)(m.n,{selectedKey:D,onSelectionChange:e=>_(String(e)),children:[(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eq.Z,{size:16}),(0,t.jsx)("span",{children:"Sesi\xf3n Actual"})]})},"live"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(S.Z,{size:16}),(0,t.jsx)("span",{children:"Horario"})]})},"schedule"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.Z,{size:16}),(0,t.jsx)("span",{children:"Recursos"})]})},"resources")]}),"live"===D&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,t.jsx)(i.w,{className:"julia-card",children:(0,t.jsx)(n.G,{children:l?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"aspect-video bg-gradient-to-br from-blue-900 to-purple-900 rounded-lg flex items-center justify-center mb-4",children:(0,t.jsxs)("div",{className:"text-center text-white",children:[(0,t.jsx)(eq.Z,{size:48,className:"mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold",children:l.title}),(0,t.jsx)("p",{className:"text-blue-200",children:l.teacher}),(0,t.jsx)(eM.O,{color:"success",className:"mt-2",children:"EN VIVO"})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,t.jsx)(c.A,{color:"primary",variant:"flat",startContent:(0,t.jsx)(eO.Z,{size:16}),children:"Micr\xf3fono"}),(0,t.jsx)(c.A,{color:"primary",variant:"flat",startContent:(0,t.jsx)(eF.Z,{size:16}),children:"C\xe1mara"}),(0,t.jsx)(c.A,{color:N?"warning":"default",variant:N?"solid":"flat",startContent:(0,t.jsx)(eL.Z,{size:16}),onPress:T,children:N?"Bajar mano":"Levantar mano"}),(0,t.jsx)(c.A,{color:"secondary",variant:"flat",startContent:(0,t.jsx)(eB.Z,{size:16}),children:"Compartir"})]})]}):(0,t.jsx)("div",{className:"aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center text-gray-500",children:[(0,t.jsx)(eV.Z,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,t.jsx)("h3",{className:"text-lg font-medium",children:"No hay sesi\xf3n activa"}),(0,t.jsx)("p",{className:"text-sm",children:"Revisa tu horario para pr\xf3ximas clases"})]})})})}),(0,t.jsxs)(i.w,{className:"julia-card",children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("h4",{className:"font-semibold",children:["Participantes (",(null==l?void 0:l.participants)||0,")"]})}),(0,t.jsx)(n.G,{children:(0,t.jsx)("div",{className:"grid grid-cols-6 gap-3",children:[...Array(Math.min((null==l?void 0:l.participants)||0,12))].map((e,a)=>(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.h,{name:"E".concat(a+1),size:"sm",className:0===a?"ring-2 ring-blue-500":""}),(0,t.jsx)("p",{className:"text-xs mt-1 truncate",children:0===a?(null==s?void 0:s.name)||"T\xfa":"Estudiante ".concat(a+1)})]},a))})})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)(i.w,{className:"julia-card",children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eI.Z,{size:16}),(0,t.jsx)("h4",{className:"font-semibold",children:"Chat de Clase"})]})}),(0,t.jsxs)(n.G,{children:[(0,t.jsx)("div",{className:"h-64 overflow-y-auto mb-4 space-y-2",children:j.map(e=>(0,t.jsxs)("div",{className:"p-2 rounded text-sm ".concat("teacher"===e.type?"bg-blue-50 dark:bg-blue-900/20 border-l-2 border-blue-500":"system"===e.type?"bg-gray-50 dark:bg-gray-800 text-gray-600 text-center":"bg-green-50 dark:bg-green-900/20"),children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("span",{className:"font-medium text-xs",children:e.sender}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleTimeString().slice(0,5)})]}),(0,t.jsx)("p",{className:"mt-1",children:e.message})]},e.id))}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(ei.Y,{placeholder:"Escribe un mensaje...",value:y,onValueChange:f,onKeyDown:e=>{"Enter"===e.key&&E()},className:"flex-1"}),(0,t.jsx)(c.A,{color:"primary",onPress:E,isDisabled:!y.trim(),children:"Enviar"})]})]})]})})]}),"schedule"===D&&(0,t.jsxs)(i.w,{className:"julia-card",children:[(0,t.jsx)(h.u,{children:(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Horario de Clases"})}),(0,t.jsx)(n.G,{children:(0,t.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-bold",children:e.time}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[e.duration,"min"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium",children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.teacher," • ",e.subject]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(A.Z,{size:12}),(0,t.jsxs)("span",{className:"text-xs",children:[e.participants," participantes"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.z,{color:"live"===e.status?"success":"upcoming"===e.status?"warning":"default",size:"sm",children:"live"===e.status?"En Vivo":"upcoming"===e.status?"Pr\xf3xima":"Grabada"}),(0,t.jsx)(c.A,{color:"primary",size:"sm",onPress:()=>Z(e),isDisabled:"recorded"===e.status,children:"live"===e.status?"Unirse":"Programar"})]})]},e.id))})})]}),"resources"===D&&(0,t.jsxs)(i.w,{className:"julia-card",children:[(0,t.jsx)(h.u,{children:(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Recursos de Clase"})}),(0,t.jsx)(n.G,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)(w.Z,{className:"text-blue-500 mb-2",size:24}),(0,t.jsx)("h4",{className:"font-medium",children:"Material de Estudio"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Accede a presentaciones, ejercicios y recursos complementarios"}),(0,t.jsx)(c.A,{color:"primary",size:"sm",className:"mt-2",children:"Ver Recursos"})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)(eq.Z,{className:"text-green-500 mb-2",size:24}),(0,t.jsx)("h4",{className:"font-medium",children:"Grabaciones"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Revisa clases anteriores y repasa conceptos importantes"}),(0,t.jsx)(c.A,{color:"success",size:"sm",className:"mt-2",children:"Ver Grabaciones"})]})]})})]}),(0,t.jsx)(i.w,{className:"border-2 border-dashed border-gray-300 dark:border-gray-600",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["\uD83C\uDF93 ",(0,t.jsx)("strong",{children:"Aula Virtual Julia:"})," ",l?"Conectado a sesi\xf3n en vivo":"Esperando pr\xf3xima clase"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Sistema de videoconferencia integrado con seguimiento de participaci\xf3n"})]})})]})}var eU=a(38462),eK=a(34671),eH=a(42871),eQ=a(56108),eY=a(41556),eW=a(43767),e$=a(79785),eX=a(23167),e0=a(17653),e2=a(19672);let e1=(0,ex.X)();class e4{async getDocuments(){try{let e=await fetch("".concat(e1,"/api/library/documents"));if(!e.ok)throw Error("Error fetching documents: ".concat(e.statusText));let s=await e.json(),a=e=>({...e,name:e.name||e.title,topic:e.topic||e.subject_topic||e.theme||void 0});if(Array.isArray(s.documents)&&(s.documents=s.documents.map(a)),s.documents_by_subject&&"object"==typeof s.documents_by_subject)for(let e of Object.keys(s.documents_by_subject))s.documents_by_subject[e]=(s.documents_by_subject[e]||[]).map(a);return s}catch(e){throw console.error("Error fetching documents:",e),e}}async searchDocuments(e,s){try{let a=await fetch("".concat(e1,"/api/library/search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,subject:s||"",top_k:10})});if(!a.ok)throw Error("Error searching documents: ".concat(a.statusText));let t=await a.json();return{success:t.success,query:t.query,documents:t.results||[],total_results:t.total_results||0}}catch(e){throw console.error("Error searching documents:",e),e}}async askQuestion(e,s){try{let a=await fetch("".concat(e1,"/api/library/ask"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e,subject:s||""})});if(!a.ok)throw Error("Error asking question: ".concat(a.statusText));return await a.json()}catch(e){throw console.error("Error asking question:",e),e}}async uploadDocument(e,s,a){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=arguments.length>5?arguments[5]:void 0;try{let i=await fetch("".concat(e1,"/api/library/upload-text"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,content:s,subject:a,type:t,tags:r,...l?{student_id:l}:{}})});if(!i.ok)throw Error("Error uploading document: ".concat(i.statusText));return await i.json()}catch(e){throw console.error("Error uploading document:",e),e}}async uploadFile(e,s){try{let a=new FormData;a.append("file",e),(null==s?void 0:s.subject)&&a.append("subject",s.subject),(null==s?void 0:s.topic)&&a.append("topic",s.topic);let t=await fetch("".concat(e1,"/api/library/upload"),{method:"POST",body:a});if(!t.ok)throw Error("Error uploading file: ".concat(t.statusText));return await t.json()}catch(e){throw console.error("Error uploading file:",e),e}}async uploadTextDocument(e,s,a){try{let t=await fetch("".concat(e1,"/api/library/upload-text"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,content:s,subject:a})});if(!t.ok)throw Error("Error uploading text document: ".concat(t.statusText));return await t.json()}catch(e){throw console.error("Error uploading text document:",e),e}}async getLibraryStats(){try{let e=await fetch("".concat(e1,"/api/library/stats"));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(e){throw console.error("Error getting library stats:",e),e}}getSubjectEmoji(e){return({Matemáticas:"\uD83D\uDCCA",Física:"⚛️",Química:"\uD83E\uDDEA",Biología:"\uD83E\uDDEC",Historia:"\uD83C\uDFDB️",Literatura:"\uD83D\uDCDA",Inglés:"\uD83C\uDDFA\uD83C\uDDF8",Filosofía:"\uD83E\uDD14",Arte:"\uD83C\uDFA8",Música:"\uD83C\uDFB5","Educaci\xf3n F\xedsica":"⚽",Informática:"\uD83D\uDCBB",Ciencias:"\uD83D\uDD2C",General:"\uD83D\uDCDD"})[e]||"\uD83D\uDCC4"}getTypeEmoji(e){return({pdf:"\uD83D\uDCC4",document:"\uD83D\uDCDD",presentation:"\uD83D\uDCCA",video:"\uD83C\uDFA5",text:"\uD83D\uDCCB"})[e]||"\uD83D\uDCC4"}getFileIcon(e){return this.getTypeEmoji(e)}getSubjectColor(e){return({Matemáticas:"bg-blue-100 text-blue-800",Física:"bg-purple-100 text-purple-800",Química:"bg-green-100 text-green-800",Biología:"bg-emerald-100 text-emerald-800",Historia:"bg-orange-100 text-orange-800",Literatura:"bg-pink-100 text-pink-800",Inglés:"bg-indigo-100 text-indigo-800",Filosofía:"bg-gray-100 text-gray-800",Arte:"bg-red-100 text-red-800",Música:"bg-yellow-100 text-yellow-800","Educaci\xf3n F\xedsica":"bg-green-100 text-green-800",Informática:"bg-blue-100 text-blue-800",Ciencias:"bg-cyan-100 text-cyan-800",General:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800"}formatDate(e){return new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})}}let e3=new e4;var e5=a(16331),e6=a(20322),e8=a(83365),e7=a(42548);function e9(e){let{stats:s,loading:a=!1}=e;if(a)return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(i.w,{className:"animate-pulse",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]})},s))});if(!s)return(0,t.jsx)(i.w,{children:(0,t.jsxs)(n.G,{className:"text-center py-8",children:[(0,t.jsx)(eH.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No hay estad\xedsticas disponibles"})]})});let r=(null==s?void 0:s.documents_by_subject)||{};null==s||s.documents_by_type;let l=(null==s?void 0:s.recent_uploads)||[];null==s||s.usage_stats;let o=(null==s?void 0:s.popular_searches)||[];null==s||s.popular_tags;let m=(null==s?void 0:s.total_storage_used)||(null==s?void 0:s.total_storage)||"0 MB",u=Object.entries(r),p=u.sort((e,s)=>{let[,a]=e,[,t]=s;return t-a}).slice(0,3);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsx)(i.w,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,t.jsx)(e2.Z,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:(null==s?void 0:s.total_documents)||0}),(0,t.jsx)("div",{className:"text-sm text-blue-600",children:"Documentos"})]})}),(0,t.jsx)(i.w,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,t.jsx)(eH.Z,{className:"h-6 w-6 text-green-600"})}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-700",children:u.length}),(0,t.jsx)("div",{className:"text-sm text-green-600",children:"Asignaturas"})]})}),(0,t.jsx)(i.w,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,t.jsx)(e5.Z,{className:"h-6 w-6 text-purple-600"})}),(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-700",children:m}),(0,t.jsx)("div",{className:"text-sm text-purple-600",children:"Almacenado"})]})}),(0,t.jsx)(i.w,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:(0,t.jsxs)(n.G,{className:"text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,t.jsx)(e6.Z,{className:"h-6 w-6 text-orange-600"})}),(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-700",children:l.length}),(0,t.jsx)("div",{className:"text-sm text-orange-600",children:"Recientes"})]})})]}),p.length>0&&(0,t.jsxs)(i.w,{children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e8.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("span",{className:"font-semibold",children:"Asignaturas m\xe1s populares"})]})}),(0,t.jsx)(n.G,{children:(0,t.jsx)("div",{className:"space-y-3",children:p.map((e,a)=>{let[r,l]=e,i=l/((null==s?void 0:s.total_documents)||1)*100,n=["primary","secondary","success"];return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:r}),(0,t.jsxs)(d.z,{size:"sm",variant:"flat",color:n[a]||"default",children:[l," docs"]})]}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[i.toFixed(1),"%"]})]}),(0,t.jsx)(x.W,{value:i,color:n[a]||"default",size:"sm",className:"max-w-full"})]},r)})})})]}),l.length>0&&(0,t.jsxs)(i.w,{children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e6.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("span",{className:"font-semibold",children:"Actividad reciente"})]})}),(0,t.jsx)(n.G,{children:(0,t.jsx)("div",{className:"space-y-3",children:l.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.name||e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(d.z,{size:"sm",variant:"flat",color:"primary",children:e.subject}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString("es-ES",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,t.jsx)(c.A,{size:"sm",variant:"light",startContent:(0,t.jsx)(e7.Z,{className:"h-3 w-3"}),children:"Ver"})]},s))})})]}),o.length>0&&(0,t.jsxs)(i.w,{children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e5.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("span",{className:"font-semibold",children:"B\xfasquedas populares"})]})}),(0,t.jsx)(n.G,{children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map((e,s)=>(0,t.jsx)(d.z,{variant:"flat",color:"secondary",size:"sm",className:"cursor-pointer hover:opacity-80",children:e},s))})})]})]})}let se=["Matem\xe1ticas","F\xedsica","Qu\xedmica","Biolog\xeda","Historia","Literatura","Ingl\xe9s","Filosof\xeda","Arte","M\xfasica","Educaci\xf3n F\xedsica","Inform\xe1tica"];function ss(){var e,s;let{documents:a,documentsBySubject:o,stats:x,searchResults:p,questionAnswer:g,loading:j,uploading:b,searching:y,asking:f,error:N,uploadDocument:v,searchDocuments:w,askQuestion:D,loadDocuments:_,clearError:S,clearResults:z}=function(){let{user:e}=(0,l.a)(),s=(null==e?void 0:e.id)||(null==e?void 0:e.email)||void 0,[a,t]=(0,r.useState)([]),[i,n]=(0,r.useState)({}),[c,o]=(0,r.useState)(null),[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[f,N]=(0,r.useState)(!1),[v,w]=(0,r.useState)(null),D=(e,s)=>{console.error(e),w(e instanceof Error?e.message:s)},_=(0,r.useCallback)(async()=>{try{p(!0),w(null);let e=await e3.getDocuments(),s=e.documents||[],a=e.documents_by_subject||{};t(s),n(a)}catch(e){D(e,"Error al cargar documentos")}finally{p(!1)}},[]),S=(0,r.useCallback)(async()=>{try{w(null);let e=await e3.getLibraryStats();o(e)}catch(e){D(e,"Error al cargar estad\xedsticas")}},[]),z=(0,r.useCallback)(async e=>{try{j(!0),w(null);let a=await e3.uploadDocument(e.name,e.content,e.subject,e.file_type,e.topic?[e.topic]:[],s);return await Promise.all([_(),S()]),a}catch(e){return D(e,"Error al subir documento"),null}finally{j(!1)}},[_,S,s]),C=(0,r.useCallback)(async e=>{try{y(!0),w(null);let s=await e3.searchDocuments(e.query,e.subject);return m({query:s.query,subject_filter:e.subject,formatted_results:s.formatted_results,results:s.results,documents:s.documents||[]}),s}catch(e){return D(e,"Error en la b\xfasqueda"),null}finally{y(!1)}},[]),k=(0,r.useCallback)(async e=>{try{N(!0),w(null);let s=await e3.askQuestion(e.question,e.subject);return x(s),s}catch(e){return D(e,"Error al procesar la pregunta"),null}finally{N(!1)}},[]),E=(0,r.useCallback)(()=>{w(null)},[]),A=(0,r.useCallback)(()=>{m(null),x(null)},[]);return(0,r.useEffect)(()=>{_(),S()},[_,S]),{documents:a,documentsBySubject:i,stats:c,searchResults:d,questionAnswer:u,loading:h,uploading:g,searching:b,asking:f,error:v,uploadDocument:z,searchDocuments:C,askQuestion:k,loadDocuments:_,loadStats:S,clearError:E,clearResults:A}}(),[C,k]=(0,r.useState)("browse"),[E,A]=(0,r.useState)(""),[T,Z]=(0,r.useState)(""),[P,G]=(0,r.useState)(""),[I,q]=(0,r.useState)(""),[O,F]=(0,r.useState)(!1),[L,B]=(0,r.useState)({name:"",content:"",subject:"",topic:"",file_type:"text",selectedFile:null}),V=async()=>{if(L.name&&L.content&&L.subject)try{await v(L),B({name:"",content:"",subject:"",topic:"",file_type:"text",selectedFile:null}),alert("\xa1Documento subido exitosamente!")}catch(e){alert("Error al subir el documento")}},J=async()=>{E.trim()&&await w({query:E,subject:T||void 0})},U=async()=>{P.trim()&&await D({question:P,subject:I||void 0})};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:(0,t.jsx)(eH.Z,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Biblioteca Educativa"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Gestiona y consulta tus documentos acad\xe9micos"})]})]}),(0,t.jsx)(c.A,{color:"primary",startContent:(0,t.jsx)(eQ.Z,{className:"h-4 w-4"}),onPress:()=>k("upload"),isLoading:b,children:"Subir Documento"})]}),(0,t.jsx)(e9,{stats:x,loading:j}),N&&(0,t.jsx)(i.w,{className:"border-red-200 bg-red-50",children:(0,t.jsx)(n.G,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-red-600",children:N}),(0,t.jsx)(c.A,{size:"sm",variant:"light",onPress:S,children:"Cerrar"})]})})}),(0,t.jsxs)(m.n,{selectedKey:C,onSelectionChange:e=>k(e),variant:"bordered",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-primary",tab:"max-w-fit px-0 h-12",tabContent:"group-data-[selected=true]:text-primary"},children:[(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e$.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Explorar"})]}),children:(0,t.jsx)("div",{className:"mt-6",children:j?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(R.c,{size:"lg"})}):(()=>{let e=Object.keys(o);return 0===e.length?(0,t.jsx)(i.w,{children:(0,t.jsxs)(n.G,{className:"text-center py-8",children:[(0,t.jsx)(eH.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No hay documentos en la biblioteca"}),(0,t.jsx)(c.A,{color:"primary",variant:"flat",startContent:(0,t.jsx)(eQ.Z,{className:"h-4 w-4"}),onPress:()=>k("upload"),className:"mt-4",children:"Subir primer documento"})]})}):(0,t.jsx)(eU.d,{variant:"bordered",selectionMode:"multiple",children:e.map(e=>{var s;return(0,t.jsx)(eK.G,{title:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-xl",children:e3.getSubjectEmoji(e)}),(0,t.jsx)("span",{className:"font-medium",children:e}),(0,t.jsx)(eM.O,{color:"primary",variant:"flat",size:"sm",children:(null===(s=o[e])||void 0===s?void 0:s.length)||0})]}),children:(0,t.jsx)("div",{className:"grid gap-3",children:(o[e]||[]).map(s=>(0,t.jsx)(i.w,{className:"hover:shadow-md transition-shadow",children:(0,t.jsx)(n.G,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,t.jsx)("div",{className:"text-2xl",children:e3.getFileIcon(s.type)}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:s.name||s.title}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:s.topic||""}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)(d.z,{size:"sm",variant:"flat",className:e3.getSubjectColor(e),children:e}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:e3.formatDate(s.upload_date)})]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:s.size}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:s.type})]})]})})},s.id))})},e)})})})()})},"browse"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eY.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Buscar"})]}),children:(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsx)(i.w,{children:(0,t.jsx)(n.G,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,t.jsx)(ei.Y,{placeholder:"\xbfQu\xe9 est\xe1s buscando?",value:E,onValueChange:A,startContent:(0,t.jsx)(eY.Z,{className:"h-4 w-4 text-gray-400"}),className:"md:col-span-2"}),(0,t.jsx)(er.g,{placeholder:"Filtrar por asignatura",value:T,onChange:e=>Z(e.target.value),children:se.map(e=>(0,t.jsxs)(el.R,{value:e,children:[e3.getSubjectEmoji(e)," ",e]},e))})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.A,{color:"primary",onPress:J,isLoading:y,isDisabled:!E.trim(),children:"Buscar"}),p&&(0,t.jsx)(c.A,{variant:"flat",onPress:z,children:"Limpiar"})]})]})})}),y&&(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(R.c,{size:"lg"})}),p?(0,t.jsxs)(i.w,{children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eY.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("span",{className:"font-medium",children:"Resultados de b\xfasqueda"})]})}),(0,t.jsxs)(n.G,{children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["B\xfasqueda: ",(0,t.jsxs)("span",{className:"font-medium",children:['"',p.query,'"']}),p.subject_filter&&(0,t.jsxs)("span",{children:[" en ",(0,t.jsx)("span",{className:"font-medium",children:p.subject_filter})]})]})}),(0,t.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:(null===(e=p.formatted_results)||void 0===e?void 0:e.replace(/\n/g,"<br>"))||p.results||""}})})]})]}):null]})},"search"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eX.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Preguntar"})]}),children:(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsx)(i.w,{children:(0,t.jsx)(n.G,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(M.Y,{placeholder:"Haz una pregunta sobre tus documentos...",value:P,onValueChange:G,minRows:3,maxRows:6}),(0,t.jsx)(er.g,{placeholder:"Asignatura (opcional)",value:I,onChange:e=>q(e.target.value),children:se.map(e=>(0,t.jsxs)(el.R,{value:e,children:[e3.getSubjectEmoji(e)," ",e]},e))}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.A,{color:"primary",onPress:U,isLoading:f,isDisabled:!P.trim(),startContent:(0,t.jsx)(eW.Z,{className:"h-4 w-4"}),children:"Preguntar"}),g&&(0,t.jsx)(c.A,{variant:"flat",onPress:z,children:"Limpiar"})]})]})})}),f&&(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(R.c,{size:"lg"})}),g?(0,t.jsxs)(i.w,{children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eW.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("span",{className:"font-medium",children:"Respuesta de la biblioteca"})]})}),(0,t.jsxs)(n.G,{children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Pregunta: ",(0,t.jsxs)("span",{className:"font-medium",children:['"',g.question,'"']}),g.subject&&(0,t.jsxs)("span",{children:[" sobre ",(0,t.jsx)("span",{className:"font-medium",children:g.subject})]})]})}),(0,t.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:(null===(s=g.formatted_answer)||void 0===s?void 0:s.replace(/\n/g,"<br>"))||g.answer}})})]})]}):null]})},"ask"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e0.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Subir"})]}),children:(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsxs)(i.w,{children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e0.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("span",{className:"text-lg font-semibold",children:"Subir Documento"})]})}),(0,t.jsx)(n.G,{children:(0,t.jsxs)(m.n,{variant:"bordered",classNames:{tabList:"gap-6 w-full",cursor:"w-full bg-primary",tab:"max-w-fit px-4 h-10"},children:[(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e2.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Texto"})]}),children:(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsx)(ei.Y,{label:"Nombre del documento",placeholder:"Ej: \xc1lgebra Lineal - Cap\xedtulo 1",value:L.name,onValueChange:e=>B(s=>({...s,name:e})),isRequired:!0}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)(er.g,{label:"Asignatura",placeholder:"Selecciona una asignatura",value:L.subject,onChange:e=>B(s=>({...s,subject:e.target.value})),isRequired:!0,children:se.map(e=>(0,t.jsxs)(el.R,{value:e,children:[e3.getSubjectEmoji(e)," ",e]},e))}),(0,t.jsx)(ei.Y,{label:"Tema espec\xedfico",placeholder:"Ej: Vectores y matrices",value:L.topic,onValueChange:e=>B(s=>({...s,topic:e}))})]}),(0,t.jsx)(M.Y,{label:"Contenido del documento",placeholder:"Pega o escribe el contenido del documento...",value:L.content,onValueChange:e=>B(s=>({...s,content:e})),minRows:6,maxRows:12,isRequired:!0}),(0,t.jsx)(c.A,{color:"primary",onPress:V,isLoading:b,isDisabled:!L.name||!L.content||!L.subject,startContent:(0,t.jsx)(e0.Z,{className:"h-4 w-4"}),size:"lg",className:"w-full",children:"Subir Documento de Texto"})]})},"text"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e2.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Archivo"})]}),children:(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)(er.g,{label:"Asignatura",placeholder:"Selecciona una asignatura",value:L.subject,onChange:e=>B(s=>({...s,subject:e.target.value})),isRequired:!0,children:se.map(e=>(0,t.jsxs)(el.R,{value:e,children:[e3.getSubjectEmoji(e)," ",e]},e))}),(0,t.jsx)(ei.Y,{label:"Tema espec\xedfico",placeholder:"Ej: Vectores y matrices",value:L.topic,onValueChange:e=>B(s=>({...s,topic:e}))})]}),(0,t.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(e2.Z,{className:"h-12 w-12 text-gray-400 mx-auto"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-gray-900",children:"Selecciona un archivo"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"PDF, Word (.docx) o archivos de texto"})]}),(0,t.jsx)("input",{type:"file",accept:".pdf,.docx,.txt",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];a&&B(e=>({...e,selectedFile:a,name:a.name.replace(/\.[^/.]+$/,"")}))},className:"hidden",id:"file-upload"}),(0,t.jsx)("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-primary-dark cursor-pointer",children:"Seleccionar archivo"}),L.selectedFile&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-gray-100 rounded-md",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Archivo seleccionado: ",L.selectedFile.name]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Tama\xf1o: ",(L.selectedFile.size/1024/1024).toFixed(2)," MB"]})]})]})}),(0,t.jsx)(c.A,{color:"primary",onPress:async()=>{if(L.selectedFile&&L.subject){F(!0);try{await e3.uploadFile(L.selectedFile,{subject:L.subject,topic:L.topic}),B({name:"",content:"",subject:"",topic:"",file_type:"text",selectedFile:null});let e=document.getElementById("file-upload");e&&(e.value=""),await _(),alert("\xa1Archivo subido exitosamente!")}catch(e){console.error("Error uploading file:",e),alert("Error al subir el archivo")}finally{F(!1)}}},isLoading:O,isDisabled:!L.selectedFile||!L.subject,startContent:(0,t.jsx)(e0.Z,{className:"h-4 w-4"}),size:"lg",className:"w-full",children:"Subir Archivo"})]})},"file")]})})]})})},"upload")]})]})}function sa(e){var s;let{studentId:a}=e,{user:P,loading:G}=(0,l.a)(),I=a||(null==P?void 0:P.email)||void 0,[R,M]=(0,r.useState)("dashboard"),{dashboardStats:q,studentStats:O,isLoading:F,error:L,lastUpdated:B,refreshStats:V,updateActivity:J,clearError:U}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{studentId:s,autoRefresh:a=!0,refreshInterval:t=3e5,onError:l}=e,[i,n]=(0,r.useState)(null),[c,o]=(0,r.useState)(null),[d,m]=(0,r.useState)(!0),[u,x]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),g=(0,r.useCallback)(()=>{x(null)},[]),j=(0,r.useRef)(!1),b=(0,r.useRef)(null),y=(0,r.useRef)(null),f=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!s)return;if(y.current)return y.current;if(j.current&&!e.force)return;let a=(async()=>{try{m(!0),x(null);let e=await et.getDashboardStats(s);n(e),o(e.student),p(new Date)}catch(s){let e=s instanceof Error?s.message:"Error desconocido al cargar estad\xedsticas";x(e),l&&l(s instanceof Error?s:Error(e))}finally{m(!1),j.current=!0,y.current=null}})();return y.current=a,a},[s,l]),N=(0,r.useCallback)(async e=>{try{if(!s)return;await et.updateStudentActivity(s,e),await f({force:!0}),console.log("✅ Actividad actualizada:",e)}catch(s){let e=s instanceof Error?s.message:"Error actualizando actividad";x(e),l&&l(s instanceof Error?s:Error(e)),console.error("❌ Error actualizando actividad:",s)}},[s,f,l]);return(0,r.useEffect)(()=>{s&&f({force:!0})},[s,f]),(0,r.useEffect)(()=>{if(a&&s)return b.current&&(clearInterval(b.current),b.current=null),b.current=setInterval(()=>{f()},t),()=>{b.current&&clearInterval(b.current),b.current=null}},[f,a,t,s]),{dashboardStats:i,studentStats:c,isLoading:d,error:u,lastUpdated:h,refreshStats:f,updateActivity:N,clearError:g}}(I?{studentId:I,autoRefresh:!0,refreshInterval:3e5}:{studentId:"__disabled__",autoRefresh:!1,refreshInterval:99999999});if(!a&&!G&&P&&!P.email)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,t.jsx)(i.w,{className:"w-72 p-6",children:(0,t.jsxs)(n.G,{className:"text-center space-y-3",children:[(0,t.jsx)(p.Z,{className:"h-10 w-10 mx-auto animate-spin text-blue-500"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Preparando tu sesi\xf3n..."})]})})});if(G&&!I)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,t.jsx)(i.w,{className:"w-72 p-6",children:(0,t.jsxs)(n.G,{className:"text-center space-y-3",children:[(0,t.jsx)(p.Z,{className:"h-10 w-10 mx-auto animate-spin text-blue-500"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Cargando usuario..."})]})})});if(!G&&!I)return(0,t.jsx)("div",{className:"p-6 text-sm text-red-600",children:"No se pudo determinar el ID del estudiante."});let K=e=>e>=80?"success":e>=60?"warning":"danger",H=e=>{switch(e){case"high":return"danger";case"medium":return"warning";case"low":return"success";default:return"default"}};if(F&&!O)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,t.jsx)(i.w,{className:"w-96 p-8",children:(0,t.jsxs)(n.G,{className:"text-center space-y-4",children:[(0,t.jsx)(p.Z,{className:"h-12 w-12 mx-auto animate-spin text-blue-500"}),(0,t.jsx)("h3",{className:"text-xl font-semibold",children:"Cargando Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Obteniendo tus estad\xedsticas..."})]})})});if(L&&!O)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-red-50 to-pink-100",children:(0,t.jsx)(i.w,{className:"w-96 p-8",children:(0,t.jsxs)(n.G,{className:"text-center space-y-4",children:[(0,t.jsx)(g.Z,{className:"h-12 w-12 mx-auto text-red-500"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-red-700",children:"Error de Conexi\xf3n"}),(0,t.jsx)("p",{className:"text-gray-600",children:L}),(0,t.jsx)(c.A,{color:"danger",variant:"flat",onPress:U,startContent:(0,t.jsx)(p.Z,{className:"h-4 w-4"}),children:"Reintentar"})]})})});let Q={name:(null==O?void 0:O.name)||I};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6 flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(o.h,{size:"lg",name:(null==O?void 0:O.name)||"Estudiante",className:"bg-gradient-to-r from-purple-500 to-pink-500"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-800",children:["\xa1Hola, ",(null==O?void 0:O.name)||"Estudiante","! \uD83D\uDC4B"]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[null==O?void 0:O.grade," • ",null==O?void 0:O.current_level]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,t.jsxs)(d.z,{size:"sm",variant:"flat",color:(null==q?void 0:q.system_status.system_health)==="good"?"success":"warning",startContent:(null==q?void 0:q.system_status.system_health)==="good"?(0,t.jsx)(j.Z,{className:"h-3 w-3"}):(0,t.jsx)(g.Z,{className:"h-3 w-3"}),children:[null==q?void 0:q.system_status.agents_active,"/",null==q?void 0:q.system_status.total_agents," Agentes Activos"]}),(0,t.jsxs)(d.z,{size:"sm",variant:"flat",color:"default",children:["Actualizado: ",(e=>{if(!e)return"Nunca";let s=Math.floor((new Date().getTime()-e.getTime())/6e4);if(s<1)return"Ahora";if(s<60)return"Hace ".concat(s,"m");let a=Math.floor(s/60);return a<24?"Hace ".concat(a,"h"):e.toLocaleDateString()})(B)]})]})]})]}),(0,t.jsx)(c.A,{color:"primary",variant:"flat",size:"sm",isLoading:F,onPress:()=>V(),startContent:(0,t.jsx)(p.Z,{className:"h-4 w-4"}),children:"Actualizar"})]}),L&&(0,t.jsx)(i.w,{className:"mb-6 border-l-4 border-warning-500",children:(0,t.jsx)(n.G,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(b.Z,{className:"h-5 w-5 text-warning-500"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-warning-700 font-medium",children:"Problema de Conectividad"}),(0,t.jsx)("p",{className:"text-warning-600 text-sm",children:L})]}),(0,t.jsx)(c.A,{size:"sm",variant:"light",onPress:U,children:"Descartar"})]})})}),(0,t.jsxs)(m.n,{selectedKey:R,onSelectionChange:e=>M(e),size:"lg",className:"mb-6",children:[(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Dashboard"})]}),children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(i.w,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:(0,t.jsxs)(n.G,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-blue-100 text-sm",children:"Progreso General"}),(0,t.jsxs)("p",{className:"text-3xl font-bold",children:[(null==O?void 0:O.overall_progress)||0,"%"]})]}),(0,t.jsx)(f.Z,{className:"h-8 w-8 text-blue-200"})]}),(0,t.jsx)(x.W,{value:(null==O?void 0:O.overall_progress)||0,className:"mb-2",color:"warning"}),(0,t.jsxs)("p",{className:"text-blue-100 text-xs",children:["Meta semanal: ",(null==O?void 0:O.weekly_goal)||0,"%"]})]})}),(0,t.jsx)(i.w,{className:"bg-gradient-to-br from-orange-500 to-red-600 text-white",children:(0,t.jsxs)(n.G,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-orange-100 text-sm",children:"Racha de Estudio"}),(0,t.jsxs)("p",{className:"text-3xl font-bold",children:[(null==O?void 0:O.streak_days)||0," d\xedas"]})]}),(0,t.jsx)(N.Z,{className:"h-8 w-8 text-orange-200"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-2xl",children:(s=(null==O?void 0:O.streak_days)||0)>=30?"\uD83D\uDD25":s>=14?"⭐":s>=7?"\uD83C\uDF1F":"⚡"}),(0,t.jsx)("p",{className:"text-orange-100 text-xs",children:"\xa1Mant\xe9n el ritmo!"})]})]})}),(0,t.jsx)(i.w,{className:"bg-gradient-to-br from-green-500 to-teal-600 text-white",children:(0,t.jsxs)(n.G,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-green-100 text-sm",children:"Hoy"}),(0,t.jsx)("p",{className:"text-3xl font-bold",children:(null==O?void 0:O.today_activity.points_earned)||0}),(0,t.jsx)("p",{className:"text-green-100 text-xs",children:"puntos ganados"})]}),(0,t.jsx)(v.Z,{className:"h-8 w-8 text-green-200"})]}),(0,t.jsxs)("div",{className:"text-green-100 text-xs space-y-1",children:[(0,t.jsxs)("p",{children:[(null==O?void 0:O.today_activity.lessons_completed)||0," lecciones • ",(null==O?void 0:O.today_activity.exercises_completed)||0," ejercicios"]}),(0,t.jsxs)("p",{children:[(e=>{let s=Math.floor(e/60),a=e%60;return s>0?"".concat(s,"h ").concat(a,"m"):"".concat(a,"m")})((null==O?void 0:O.today_activity.study_time_minutes)||0)," estudiados"]})]})]})})]}),(0,t.jsxs)(i.w,{children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("h3",{className:"text-xl font-semibold flex items-center",children:[(0,t.jsx)(w.Z,{className:"h-5 w-5 mr-2"}),"Progreso por Materias"]})}),(0,t.jsx)(n.G,{children:(0,t.jsx)("div",{className:"space-y-4",children:null==O?void 0:O.subject_stats.map((e,s)=>(0,t.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:e.subject}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["Nota: ",e.grade.toFixed(1)," • ",e.exercises_completed," ejercicios"]})]}),(0,t.jsx)(x.W,{value:e.progress,color:K(e.progress),className:"mb-1"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:[e.progress,"% completado"]}),(0,t.jsxs)("span",{children:[e.time_spent_hours,"h estudiadas"]})]})]})},s))})})]}),(null==q?void 0:q.recommendations)&&q.recommendations.length>0&&(0,t.jsxs)(i.w,{children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("h3",{className:"text-xl font-semibold flex items-center",children:[(0,t.jsx)(D.Z,{className:"h-5 w-5 mr-2"}),"Recomendaciones Personalizadas"]})}),(0,t.jsx)(n.G,{children:(0,t.jsx)("div",{className:"space-y-3",children:q.recommendations.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg border",children:[(0,t.jsxs)("div",{className:"p-2 rounded-full ".concat("high"===e.priority?"bg-red-100":"medium"===e.priority?"bg-yellow-100":"bg-green-100"),children:["focus_area"===e.type&&(0,t.jsx)(_.Z,{className:"h-4 w-4 text-red-600"}),"study_plan"===e.type&&(0,t.jsx)(S.Z,{className:"h-4 w-4 text-yellow-600"}),"motivation"===e.type&&(0,t.jsx)(z.Z,{className:"h-4 w-4 text-green-600"}),"health"===e.type&&(0,t.jsx)(C.Z,{className:"h-4 w-4 text-blue-600"})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"font-medium",children:e.title}),(0,t.jsx)(d.z,{size:"sm",color:H(e.priority),variant:"flat",children:"high"===e.priority?"Alta":"medium"===e.priority?"Media":"Baja"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]})]},s))})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(i.w,{children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,t.jsx)(S.Z,{className:"h-5 w-5 mr-2"}),"Clases de Hoy"]})}),(0,t.jsx)(n.G,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[null==O?void 0:O.upcoming_classes.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.subject}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:e.teacher}),e.classroom&&(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.classroom})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-600",children:e.time}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.duration_minutes,"min"]})]})]},s)),(!(null==O?void 0:O.upcoming_classes)||0===O.upcoming_classes.length)&&(0,t.jsx)("p",{className:"text-gray-500 text-sm text-center py-4",children:"No hay clases programadas para hoy"})]})})]}),(0,t.jsxs)(i.w,{children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,t.jsx)(k.Z,{className:"h-5 w-5 mr-2"}),"Logros Recientes"]})}),(0,t.jsx)(n.G,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[null==O?void 0:O.recent_achievements.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 rounded-lg",children:[(0,t.jsx)("div",{className:"p-2 bg-yellow-200 rounded-full",children:(0,t.jsx)(E.Z,{className:"h-4 w-4 text-yellow-700"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString()}),(0,t.jsxs)(d.z,{size:"sm",color:"warning",variant:"flat",children:["+",e.points," pts"]})]})]})]},s)),(!(null==O?void 0:O.recent_achievements)||0===O.recent_achievements.length)&&(0,t.jsx)("p",{className:"text-gray-500 text-sm text-center py-4",children:"\xa1Completa actividades para desbloquear logros!"})]})})]}),(0,t.jsxs)(i.w,{children:[(0,t.jsx)(h.u,{children:(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,t.jsx)(v.Z,{className:"h-5 w-5 mr-2"}),"Insignias"]})}),(0,t.jsx)(n.G,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[null==O?void 0:O.badges.map((e,s)=>(0,t.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl mb-1",children:e.icon}),(0,t.jsx)("p",{className:"text-xs font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),(0,t.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:new Date(e.unlocked_date).toLocaleDateString()})]},s)),(!(null==O?void 0:O.badges)||0===O.badges.length)&&(0,t.jsx)("div",{className:"col-span-2 text-center py-4",children:(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"\xa1Completa desaf\xedos para ganar insignias!"})})]})})]})]})]})},"dashboard"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(S.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Planificador"})]}),children:(0,t.jsx)(ey,{studentData:Q})},"planner"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Progreso"})]}),children:(0,t.jsx)(eG,{studentData:Q})},"progress"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(D.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Coach IA"})]}),children:(0,t.jsx)(eR,{studentData:Q})},"coach"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Aula Virtual"})]}),children:(0,t.jsx)(eJ,{studentData:Q})},"classroom"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(T.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Biblioteca"})]}),children:(0,t.jsx)(ss,{})},"library"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Chat Multi-Agente"})]}),children:(0,t.jsx)(ee,{onActivityUpdate:e=>{J({type:"chat_session",duration_minutes:15,...e})}})},"multiagent-chat"),(0,t.jsx)(u.r,{title:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Chat Individual"})]}),children:(0,t.jsx)(W,{onActivityUpdate:e=>{J({type:"chat_session",duration_minutes:10,...e})}})},"agent-chat")]})]})})}},76362:function(e,s,a){a.d(s,{a:function(){return r}});var t=a(49294);let r=()=>(0,t.E)()},74780:function(e,s,a){a.d(s,{X:function(){return t}});function t(){let e="http://localhost:8000";return e.endsWith("/")?e.slice(0,-1):e}}}]);